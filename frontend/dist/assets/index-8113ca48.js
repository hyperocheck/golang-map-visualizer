var Se=Object.defineProperty;var ze=(e,t,n)=>t in e?Se(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ee=(e,t,n)=>(ze(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const u of s)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&l(f)}).observe(document,{childList:!0,subtree:!0});function n(s){const u={};return s.integrity&&(u.integrity=s.integrity),s.referrerPolicy&&(u.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?u.credentials="include":s.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function l(s){if(s.ep)return;s.ep=!0;const u=n(s);fetch(s.href,u)}})();function Z(){}function Le(e){return e()}function se(){return Object.create(null)}function x(e){e.forEach(Le)}function Ke(e){return typeof e=="function"}function Ve(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Ne(e){return Object.keys(e).length===0}function k(e,t){e.appendChild(t)}function M(e,t,n){e.insertBefore(t,n||null)}function A(e){e.parentNode&&e.parentNode.removeChild(e)}function X(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function B(e){return document.createElement(e)}function O(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function H(e){return document.createTextNode(e)}function G(){return H(" ")}function Q(){return H("")}function Ae(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function i(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Me(e){return Array.from(e.childNodes)}function F(e,t){t=""+t,e.data!==t&&(e.data=t)}function fe(e,t,n,l){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,l?"important":"")}let D;function U(e){D=e}function Pe(){if(!D)throw new Error("Function called outside component initialization");return D}function We(e){Pe().$$.on_mount.push(e)}const T=[],re=[];let Y=[];const ue=[],je=Promise.resolve();let le=!1;function Ce(){le||(le=!0,je.then(Oe))}function ie(e){Y.push(e)}const te=new Set;let R=0;function Oe(){if(R!==0)return;const e=D;do{try{for(;R<T.length;){const t=T[R];R++,U(t),Be(t.$$)}}catch(t){throw T.length=0,R=0,t}for(U(null),T.length=0,R=0;re.length;)re.pop()();for(let t=0;t<Y.length;t+=1){const n=Y[t];te.has(n)||(te.add(n),n())}Y.length=0}while(T.length);for(;ue.length;)ue.pop()();le=!1,te.clear(),U(e)}function Be(e){if(e.fragment!==null){e.update(),x(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ie)}}function He(e){const t=[],n=[];Y.forEach(l=>e.indexOf(l)===-1?t.push(l):n.push(l)),n.forEach(l=>l()),Y=t}const Ie=new Set;function Re(e,t){e&&e.i&&(Ie.delete(e),e.i(t))}function N(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Te(e,t,n){const{fragment:l,after_update:s}=e.$$;l&&l.m(t,n),ie(()=>{const u=e.$$.on_mount.map(Le).filter(Ke);e.$$.on_destroy?e.$$.on_destroy.push(...u):x(u),e.$$.on_mount=[]}),s.forEach(ie)}function Xe(e,t){const n=e.$$;n.fragment!==null&&(He(n.after_update),x(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Ye(e,t){e.$$.dirty[0]===-1&&(T.push(e),Ce(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Fe(e,t,n,l,s,u,f=null,d=[-1]){const b=D;U(e);const a=e.$$={fragment:null,ctx:[],props:u,update:Z,not_equal:s,bound:se(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(b?b.$$.context:[])),callbacks:se(),dirty:d,skip_bound:!1,root:t.target||b.$$.root};f&&f(a.root);let g=!1;if(a.ctx=n?n(e,t.props||{},(r,m,...V)=>{const S=V.length?V[0]:m;return a.ctx&&s(a.ctx[r],a.ctx[r]=S)&&(!a.skip_bound&&a.bound[r]&&a.bound[r](S),g&&Ye(e,r)),m}):[],a.update(),g=!0,x(a.before_update),a.fragment=l?l(a.ctx):!1,t.target){if(t.hydrate){const r=Me(t.target);a.fragment&&a.fragment.l(r),r.forEach(A)}else a.fragment&&a.fragment.c();t.intro&&Re(e.$$.fragment),Te(e,t.target,t.anchor),Oe()}U(b)}class qe{constructor(){ee(this,"$$");ee(this,"$$set")}$destroy(){Xe(this,1),this.$destroy=Z}$on(t,n){if(!Ke(n))return Z;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const s=l.indexOf(n);s!==-1&&l.splice(s,1)}}$set(t){this.$$set&&!Ne(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Ge="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ge);function ce(e,t,n){const l=e.slice();return l[16]=t[n][0],l[17]=t[n][1],l}function ae(e,t,n){const l=e.slice();return l[20]=t[n],l}function he(e,t,n){const l=e.slice();return l[23]=t[n],l}function de(e,t,n){const l=e.slice();return l[17]=t[n],l[27]=n,l}function _e(e,t,n){const l=e.slice();return l[16]=t[n],l[27]=n,l}function ge(e,t,n){const l=e.slice();return l[29]=t[n],l[27]=n,l}function pe(e){let t,n,l,s,u=e[29]+"",f,d,b;return{c(){t=O("rect"),s=O("text"),f=H(u),i(t,"x",n=e[23].padding+e[27]*C),i(t,"y",l=e[23].padding),i(t,"width",C),i(t,"height",K),i(t,"fill","#eee"),i(t,"stroke","#000"),i(s,"x",d=e[23].padding+e[27]*C+C/2),i(s,"y",b=e[23].padding+K/1.5),i(s,"font-size","12"),i(s,"text-anchor","middle")},m(a,g){M(a,t,g),M(a,s,g),k(s,f)},p(a,g){g&2&&n!==(n=a[23].padding+a[27]*C)&&i(t,"x",n),g&2&&l!==(l=a[23].padding)&&i(t,"y",l),g&2&&u!==(u=a[29]+"")&&F(f,u),g&2&&d!==(d=a[23].padding+a[27]*C+C/2)&&i(s,"x",d),g&2&&b!==(b=a[23].padding+K/1.5)&&i(s,"y",b)},d(a){a&&(A(t),A(s))}}}function me(e){let t,n,l,s,u,f,d=(e[16]??"")+"",b,a,g;return{c(){t=O("rect"),f=O("text"),b=H(d),i(t,"x",n=e[23].padding),i(t,"y",l=e[23].padding+K+e[27]*w),i(t,"width",s=e[23].width-W*2),i(t,"height",w),i(t,"fill",u=e[16]==null?"#dbfdc9":"#b2f2bb"),i(t,"stroke","#12b886"),i(t,"class","cell-key svelte-3wbftv"),i(f,"x",a=e[23].padding+6),i(f,"y",g=e[23].padding+K+e[27]*w+w/1.5),i(f,"font-size","13")},m(r,m){M(r,t,m),M(r,f,m),k(f,b)},p(r,m){m&2&&n!==(n=r[23].padding)&&i(t,"x",n),m&2&&l!==(l=r[23].padding+K+r[27]*w)&&i(t,"y",l),m&2&&s!==(s=r[23].width-W*2)&&i(t,"width",s),m&2&&u!==(u=r[16]==null?"#dbfdc9":"#b2f2bb")&&i(t,"fill",u),m&2&&d!==(d=(r[16]??"")+"")&&F(b,d),m&2&&a!==(a=r[23].padding+6)&&i(f,"x",a),m&2&&g!==(g=r[23].padding+K+r[27]*w+w/1.5)&&i(f,"y",g)},d(r){r&&(A(t),A(f))}}}function ve(e){let t,n,l,s,u,f,d=(e[17]??"")+"",b,a,g;return{c(){t=O("rect"),f=O("text"),b=H(d),i(t,"x",n=e[23].padding),i(t,"y",l=e[23].padding+K+e[23].bucket.Keys.length*w+e[27]*w),i(t,"width",s=e[23].width-W*2),i(t,"height",w),i(t,"fill",u=e[17]==null?"#fff2b8":"#ffec99"),i(t,"stroke","#ffa94d"),i(t,"class","cell-value svelte-3wbftv"),i(f,"x",a=e[23].padding+6),i(f,"y",g=e[23].padding+K+e[23].bucket.Keys.length*w+e[27]*w+w/1.5),i(f,"font-size","13")},m(r,m){M(r,t,m),M(r,f,m),k(f,b)},p(r,m){m&2&&n!==(n=r[23].padding)&&i(t,"x",n),m&2&&l!==(l=r[23].padding+K+r[23].bucket.Keys.length*w+r[27]*w)&&i(t,"y",l),m&2&&s!==(s=r[23].width-W*2)&&i(t,"width",s),m&2&&u!==(u=r[17]==null?"#fff2b8":"#ffec99")&&i(t,"fill",u),m&2&&d!==(d=(r[17]??"")+"")&&F(b,d),m&2&&a!==(a=r[23].padding+6)&&i(f,"x",a),m&2&&g!==(g=r[23].padding+K+r[23].bucket.Keys.length*w+r[27]*w+w/1.5)&&i(f,"y",g)},d(r){r&&(A(t),A(f))}}}function be(e){let t,n,l,s,u,f,d,b,a,g,r,m=e[23].bucket.overflow+"",V,S,P,z,y=N(e[23].bucket.tophash),$=[];for(let o=0;o<y.length;o+=1)$[o]=pe(ge(e,y,o));let v=N(e[23].bucket.Keys),p=[];for(let o=0;o<v.length;o+=1)p[o]=me(_e(e,v,o));let h=N(e[23].bucket.Values),_=[];for(let o=0;o<h.length;o+=1)_[o]=ve(de(e,h,o));return{c(){t=O("g"),n=O("rect");for(let o=0;o<$.length;o+=1)$[o].c();u=Q();for(let o=0;o<p.length;o+=1)p[o].c();f=Q();for(let o=0;o<_.length;o+=1)_[o].c();d=O("rect"),r=O("text"),V=H(m),i(n,"class","bucket-rect svelte-3wbftv"),i(n,"x",0),i(n,"y",0),i(n,"width",l=e[23].width),i(n,"height",s=e[23].height),i(n,"fill","#fff"),i(n,"stroke","#000"),i(n,"stroke-width",De),i(n,"rx",Ee),i(n,"ry",Ee),i(d,"x",b=e[23].padding),i(d,"y",a=e[23].padding+K+e[23].bucket.Keys.length*w+e[23].bucket.Values.length*w),i(d,"width",g=e[23].width-W*2),i(d,"height",w),i(d,"fill","#ddd"),i(d,"stroke","#000"),i(r,"x",S=e[23].padding+6),i(r,"y",P=e[23].padding+K+e[23].bucket.Keys.length*w+e[23].bucket.Values.length*w+w/1.5),i(r,"font-size","12"),i(t,"transform",z=`translate(${e[23].x}, ${e[23].y})`),i(t,"class","bucket-group svelte-3wbftv")},m(o,E){M(o,t,E),k(t,n);for(let c=0;c<$.length;c+=1)$[c]&&$[c].m(t,null);k(t,u);for(let c=0;c<p.length;c+=1)p[c]&&p[c].m(t,null);k(t,f);for(let c=0;c<_.length;c+=1)_[c]&&_[c].m(t,null);k(t,d),k(t,r),k(r,V)},p(o,E){if(E&2&&l!==(l=o[23].width)&&i(n,"width",l),E&2&&s!==(s=o[23].height)&&i(n,"height",s),E&2){y=N(o[23].bucket.tophash);let c;for(c=0;c<y.length;c+=1){const L=ge(o,y,c);$[c]?$[c].p(L,E):($[c]=pe(L),$[c].c(),$[c].m(t,u))}for(;c<$.length;c+=1)$[c].d(1);$.length=y.length}if(E&2){v=N(o[23].bucket.Keys);let c;for(c=0;c<v.length;c+=1){const L=_e(o,v,c);p[c]?p[c].p(L,E):(p[c]=me(L),p[c].c(),p[c].m(t,f))}for(;c<p.length;c+=1)p[c].d(1);p.length=v.length}if(E&2){h=N(o[23].bucket.Values);let c;for(c=0;c<h.length;c+=1){const L=de(o,h,c);_[c]?_[c].p(L,E):(_[c]=ve(L),_[c].c(),_[c].m(t,d))}for(;c<_.length;c+=1)_[c].d(1);_.length=h.length}E&2&&b!==(b=o[23].padding)&&i(d,"x",b),E&2&&a!==(a=o[23].padding+K+o[23].bucket.Keys.length*w+o[23].bucket.Values.length*w)&&i(d,"y",a),E&2&&g!==(g=o[23].width-W*2)&&i(d,"width",g),E&2&&m!==(m=o[23].bucket.overflow+"")&&F(V,m),E&2&&S!==(S=o[23].padding+6)&&i(r,"x",S),E&2&&P!==(P=o[23].padding+K+o[23].bucket.Keys.length*w+o[23].bucket.Values.length*w+w/1.5)&&i(r,"y",P),E&2&&z!==(z=`translate(${o[23].x}, ${o[23].y})`)&&i(t,"transform",z)},d(o){o&&A(t),X($,o),X(p,o),X(_,o)}}}function we(e){let t,n,l,s,u;return{c(){t=O("line"),i(t,"x1",n=e[20].x),i(t,"y1",l=e[20].y1),i(t,"x2",s=e[20].x),i(t,"y2",u=e[20].y2),i(t,"stroke","#000"),i(t,"stroke-width","2"),i(t,"marker-end","url(#arrow)")},m(f,d){M(f,t,d)},p(f,d){d&4&&n!==(n=f[20].x)&&i(t,"x1",n),d&4&&l!==(l=f[20].y1)&&i(t,"y1",l),d&4&&s!==(s=f[20].x)&&i(t,"x2",s),d&4&&u!==(u=f[20].y2)&&i(t,"y2",u)},d(f){f&&A(t)}}}function ke(e){let t,n=N(Object.entries(e[0])),l=[];for(let s=0;s<n.length;s+=1)l[s]=ye(ce(e,n,s));return{c(){for(let s=0;s<l.length;s+=1)l[s].c();t=Q()},m(s,u){for(let f=0;f<l.length;f+=1)l[f]&&l[f].m(s,u);M(s,t,u)},p(s,u){if(u&1){n=N(Object.entries(s[0]));let f;for(f=0;f<n.length;f+=1){const d=ce(s,n,f);l[f]?l[f].p(d,u):(l[f]=ye(d),l[f].c(),l[f].m(t.parentNode,t))}for(;f<l.length;f+=1)l[f].d(1);l.length=n.length}},d(s){s&&A(t),X(l,s)}}}function ye(e){let t,n,l=e[16]+"",s,u,f,d=e[17]+"",b,a;return{c(){t=B("div"),n=B("span"),s=H(l),u=G(),f=B("b"),b=H(d),a=G(),i(t,"class","row svelte-3wbftv")},m(g,r){M(g,t,r),k(t,n),k(n,s),k(t,u),k(t,f),k(f,b),k(t,a)},p(g,r){r&1&&l!==(l=g[16]+"")&&F(s,l),r&1&&d!==(d=g[17]+"")&&F(b,d)},d(g){g&&A(t)}}}function Ue(e){let t,n,l,s,u,f,d,b,a,g,r,m,V,S,P,z=N(e[1]),y=[];for(let h=0;h<z.length;h+=1)y[h]=be(he(e,z,h));let $=N(e[2]),v=[];for(let h=0;h<$.length;h+=1)v[h]=we(ae(e,$,h));let p=e[0]&&ke(e);return{c(){t=B("div"),n=B("div"),l=O("svg"),s=O("defs"),u=O("marker"),f=O("path");for(let h=0;h<y.length;h+=1)y[h].c();d=Q();for(let h=0;h<v.length;h+=1)v[h].c();b=G(),a=B("div"),g=G(),r=B("div"),m=B("h3"),m.textContent="hmap",V=G(),p&&p.c(),i(f,"d","M0,0 L6,3 L0,6 Z"),i(f,"fill","#000"),i(u,"id","arrow"),i(u,"markerWidth","6"),i(u,"markerHeight","6"),i(u,"refX","3"),i(u,"refY","3"),i(u,"orient","auto"),i(l,"width",e[3]),i(l,"height",e[4]),i(l,"class","svelte-3wbftv"),i(n,"id","svg-container"),i(n,"class","svelte-3wbftv"),i(a,"class","splitter svelte-3wbftv"),i(m,"class","svelte-3wbftv"),i(r,"class","side svelte-3wbftv"),fe(r,"width",e[5]+"px"),i(t,"class","root svelte-3wbftv")},m(h,_){M(h,t,_),k(t,n),k(n,l),k(l,s),k(s,u),k(u,f);for(let o=0;o<y.length;o+=1)y[o]&&y[o].m(l,null);k(l,d);for(let o=0;o<v.length;o+=1)v[o]&&v[o].m(l,null);k(t,b),k(t,a),k(t,g),k(t,r),k(r,m),k(r,V),p&&p.m(r,null),S||(P=Ae(a,"mousedown",e[6]),S=!0)},p(h,[_]){if(_&2){z=N(h[1]);let o;for(o=0;o<z.length;o+=1){const E=he(h,z,o);y[o]?y[o].p(E,_):(y[o]=be(E),y[o].c(),y[o].m(l,d))}for(;o<y.length;o+=1)y[o].d(1);y.length=z.length}if(_&4){$=N(h[2]);let o;for(o=0;o<$.length;o+=1){const E=ae(h,$,o);v[o]?v[o].p(E,_):(v[o]=we(E),v[o].c(),v[o].m(l,null))}for(;o<v.length;o+=1)v[o].d(1);v.length=$.length}_&8&&i(l,"width",h[3]),_&16&&i(l,"height",h[4]),h[0]?p?p.p(h,_):(p=ke(h),p.c(),p.m(r,null)):p&&(p.d(1),p=null),_&32&&fe(r,"width",h[5]+"px")},i:Z,o:Z,d(h){h&&A(t),X(y,h),X(v,h),p&&p.d(),S=!1,P()}}}const K=24,w=22,$e=80,ne=40,Ze=4,Ee=12,W=12,De=1.5,C=27;function Je(e,t,n){let l=[],s=[],u=null,f=[],d=[],b=2e3,a=2e3,g=280,r=!1,m,V;async function S(){const[v,p]=await Promise.all([fetch("/vizual"),fetch("/hmap")]);l=await v.json(),n(0,u=await p.json()),s=[];let h=[];for(const _ of l)_.type==="main"?(h.length&&s.push(h),h=[_]):h.push(_);h.length&&s.push(h),P(),setTimeout(()=>{const _=document.getElementById("svg-container");_&&(_.scrollLeft=0,_.scrollTop=0)},0)}function P(){n(1,f=[]),n(2,d=[]);let v=$e,p=0;for(const h of s){let _=ne;const o=Math.max(...h.map(L=>L.tophash.length))*C,E=h.map(L=>{const I=L.Keys.map(j=>j?j.toString().length:0),J=L.Values.map(j=>j?j.toString().length:0),oe=L.overflow?L.overflow.toString().length:0;return Math.max(...I,...J,oe,0)*8+W*2}),c=Math.max(...E,o,260);for(let L=0;L<h.length;L++){const I=h[L],J=c,q=K+I.Keys.length*w+I.Values.length*w+w+W*2;if(f.push({id:I.id,x:v,y:_,width:J,height:q,bucket:I,padding:W}),L<h.length-1){const j=_+q+ne;d.push({x:v+J/2,y1:_+q,y2:j-Ze}),_=j}else _+=q+ne;_>p&&(p=_)}v+=c+$e}n(3,b=v+200),n(4,a=p+200)}function z(v){r=!0,m=v.clientX,V=g,document.addEventListener("mousemove",y),document.addEventListener("mouseup",$)}function y(v){if(!r)return;const p=m-v.clientX;n(5,g=Math.max(100,Math.min(800,V+p)))}function $(){r=!1,document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",$)}return We(S),[u,f,d,b,a,g,z]}class Qe extends qe{constructor(t){super(),Fe(this,t,Je,Ue,Ve,{})}}new Qe({target:document.getElementById("app")});
