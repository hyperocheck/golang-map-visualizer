var Je=Object.defineProperty;var Qe=(t,e,n)=>e in t?Je(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var pe=(t,e,n)=>(Qe(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const f of r.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&l(f)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();function ae(){}function Ve(t){return t()}function ke(){return Object.create(null)}function he(t){t.forEach(Ve)}function Ze(t){return typeof t=="function"}function $e(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function et(t){return Object.keys(t).length===0}function be(t){return t??""}function C(t,e){t.appendChild(e)}function D(t,e,n){t.insertBefore(e,n||null)}function I(t){t.parentNode&&t.parentNode.removeChild(t)}function re(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function $(t){return document.createElement(t)}function R(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function J(t){return document.createTextNode(t)}function _e(){return J(" ")}function ee(){return J("")}function ie(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function i(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function tt(t){return Array.from(t.childNodes)}function te(t,e){e=""+e,t.data!==e&&(t.data=e)}function ge(t,e,n,l){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,l?"important":"")}let de;function ce(t){de=t}function nt(){if(!de)throw new Error("Function called outside component initialization");return de}function lt(t){nt().$$.on_mount.push(t)}const fe=[],Ae=[];let ue=[];const Oe=[],it=Promise.resolve();let ye=!1;function st(){ye||(ye=!0,it.then(qe))}function ve(t){ue.push(t)}const me=new Set;let se=0;function qe(){if(se!==0)return;const t=de;do{try{for(;se<fe.length;){const e=fe[se];se++,ce(e),ot(e.$$)}}catch(e){throw fe.length=0,se=0,e}for(ce(null),fe.length=0,se=0;Ae.length;)Ae.pop()();for(let e=0;e<ue.length;e+=1){const n=ue[e];me.has(n)||(me.add(n),n())}ue.length=0}while(fe.length);for(;Oe.length;)Oe.pop()();ye=!1,me.clear(),ce(t)}function ot(t){if(t.fragment!==null){t.update(),he(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ve)}}function ft(t){const e=[],n=[];ue.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),ue=e}const rt=new Set;function Ge(t,e){t&&t.i&&(rt.delete(t),t.i(e))}function x(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function ut(t,e){t.d(1),e.delete(t.key)}function at(t,e,n,l,s,r,f,h,d,u,m,o){let p=t.length,A=r.length,W=p;const P={};for(;W--;)P[t[W].key]=W;const Y=[],X=new Map,z=new Map,K=[];for(W=A;W--;){const b=o(s,r,W),B=n(b);let y=f.get(B);y?l&&K.push(()=>y.p(b,e)):(y=u(B,b),y.c()),X.set(B,Y[W]=y),B in P&&z.set(B,Math.abs(W-P[B]))}const G=new Set,V=new Set;function c(b){Ge(b,1),b.m(h,m),f.set(b.key,b),m=b.first,A--}for(;p&&A;){const b=Y[A-1],B=t[p-1],y=b.key,M=B.key;b===B?(m=b.first,p--,A--):X.has(M)?!f.has(y)||G.has(y)?c(b):V.has(M)?p--:z.get(y)>z.get(M)?(V.add(y),c(b)):(G.add(M),p--):(d(B,f),p--)}for(;p--;){const b=t[p];X.has(b.key)||d(b,f)}for(;A;)c(Y[A-1]);return he(K),Y}function ht(t,e,n){const{fragment:l,after_update:s}=t.$$;l&&l.m(e,n),ve(()=>{const r=t.$$.on_mount.map(Ve).filter(Ze);t.$$.on_destroy?t.$$.on_destroy.push(...r):he(r),t.$$.on_mount=[]}),s.forEach(ve)}function ct(t,e){const n=t.$$;n.fragment!==null&&(ft(n.after_update),he(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function dt(t,e){t.$$.dirty[0]===-1&&(fe.push(t),st(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function _t(t,e,n,l,s,r,f=null,h=[-1]){const d=de;ce(t);const u=t.$$={fragment:null,ctx:[],props:r,update:ae,not_equal:s,bound:ke(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(d?d.$$.context:[])),callbacks:ke(),dirty:h,skip_bound:!1,root:e.target||d.$$.root};f&&f(u.root);let m=!1;if(u.ctx=n?n(t,e.props||{},(o,p,...A)=>{const W=A.length?A[0]:p;return u.ctx&&s(u.ctx[o],u.ctx[o]=W)&&(!u.skip_bound&&u.bound[o]&&u.bound[o](W),m&&dt(t,o)),p}):[],u.update(),m=!0,he(u.before_update),u.fragment=l?l(u.ctx):!1,e.target){if(e.hydrate){const o=tt(e.target);u.fragment&&u.fragment.l(o),o.forEach(I)}else u.fragment&&u.fragment.c();e.intro&&Ge(t.$$.fragment),ht(t,e.target,e.anchor),qe()}ce(d)}class gt{constructor(){pe(this,"$$");pe(this,"$$set")}$destroy(){ct(this,1),this.$destroy=ae}$on(e,n){if(!Ze(n))return ae;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const s=l.indexOf(n);s!==-1&&l.splice(s,1)}}$set(e){this.$$set&&!et(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const pt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(pt);function Me(t,e,n){const l=t.slice();return l[24]=e[n][0],l[25]=e[n][1],l}function Se(t,e,n){const l=t.slice();return l[28]=e[n],l}function Ee(t,e,n){const l=t.slice();return l[31]=e[n],l}function we(t){const e=t.slice(),n=(e[31].bucket.keys||[]).length;e[34]=n;const l=(e[31].bucket.values||[]).length;return e[35]=l,e}function Le(t,e,n){var r;const l=t.slice();l[25]=e[n],l[37]=n;const s=(((r=l[31].bucket)==null?void 0:r.keys)||[]).length;return l[34]=s,l}function Be(t,e,n){const l=t.slice();return l[24]=e[n],l[37]=n,l}function Ce(t,e,n){const l=t.slice();return l[39]=e[n],l[37]=n,l}function We(t,e,n){const l=t.slice();return l[41]=e[n],l}function Pe(t){let e,n=t[41].text+"",l,s,r,f;return{c(){e=R("text"),l=J(n),i(e,"x",s=t[41].x),i(e,"y",r=t[41].y),i(e,"class",f=be(t[41].isOld?"label-old":"label-new")+" svelte-x4wxi1"),i(e,"font-size","14"),i(e,"font-weight","bold"),i(e,"font-family","Arial, sans-serif")},m(h,d){D(h,e,d),C(e,l)},p(h,d){d[0]&8&&n!==(n=h[41].text+"")&&te(l,n),d[0]&8&&s!==(s=h[41].x)&&i(e,"x",s),d[0]&8&&r!==(r=h[41].y)&&i(e,"y",r),d[0]&8&&f!==(f=be(h[41].isOld?"label-old":"label-new")+" svelte-x4wxi1")&&i(e,"class",f)},d(h){h&&I(e)}}}function Ne(t){var K,G,V;let e,n,l,s,r,f,h,d,u,m,o,p=x(((K=t[31].bucket)==null?void 0:K.tophash)||[]),A=[];for(let c=0;c<p.length;c+=1)A[c]=Ye(Ce(t,p,c));let W=x(((G=t[31].bucket)==null?void 0:G.keys)||[]),P=[];for(let c=0;c<W.length;c+=1)P[c]=Xe(Be(t,W,c));let Y=x(((V=t[31].bucket)==null?void 0:V.values)||[]),X=[];for(let c=0;c<Y.length;c+=1)X[c]=ze(Le(t,Y,c));let z=t[31].bucket&&je(we(t));return{c(){e=R("g"),n=R("rect");for(let c=0;c<A.length;c+=1)A[c].c();d=ee();for(let c=0;c<P.length;c+=1)P[c].c();u=ee();for(let c=0;c<X.length;c+=1)X[c].c();m=ee(),z&&z.c(),i(n,"class",l="bucket-rect "+(t[31].isOld?"bucket-old":"")+" svelte-x4wxi1"),i(n,"width",s=t[31].width),i(n,"height",r=t[31].height),i(n,"fill","#fff"),i(n,"stroke",f=t[31].isOld?"#ff6b6b":"#000"),i(n,"stroke-width",h=t[31].isOld?2:Ue),i(n,"rx",Ke),i(n,"ry",Ke),i(n,"filter","url(#bucket-shadow)"),i(e,"transform",o=`translate(${t[31].x}, ${t[31].y})`),i(e,"class","bucket-group svelte-x4wxi1")},m(c,b){D(c,e,b),C(e,n);for(let B=0;B<A.length;B+=1)A[B]&&A[B].m(e,null);C(e,d);for(let B=0;B<P.length;B+=1)P[B]&&P[B].m(e,null);C(e,u);for(let B=0;B<X.length;B+=1)X[B]&&X[B].m(e,null);C(e,m),z&&z.m(e,null)},p(c,b){var B,y,M;if(b[0]&2&&l!==(l="bucket-rect "+(c[31].isOld?"bucket-old":"")+" svelte-x4wxi1")&&i(n,"class",l),b[0]&2&&s!==(s=c[31].width)&&i(n,"width",s),b[0]&2&&r!==(r=c[31].height)&&i(n,"height",r),b[0]&2&&f!==(f=c[31].isOld?"#ff6b6b":"#000")&&i(n,"stroke",f),b[0]&2&&h!==(h=c[31].isOld?2:Ue)&&i(n,"stroke-width",h),b[0]&2){p=x(((B=c[31].bucket)==null?void 0:B.tophash)||[]);let _;for(_=0;_<p.length;_+=1){const O=Ce(c,p,_);A[_]?A[_].p(O,b):(A[_]=Ye(O),A[_].c(),A[_].m(e,d))}for(;_<A.length;_+=1)A[_].d(1);A.length=p.length}if(b[0]&2){W=x(((y=c[31].bucket)==null?void 0:y.keys)||[]);let _;for(_=0;_<W.length;_+=1){const O=Be(c,W,_);P[_]?P[_].p(O,b):(P[_]=Xe(O),P[_].c(),P[_].m(e,u))}for(;_<P.length;_+=1)P[_].d(1);P.length=W.length}if(b[0]&2){Y=x(((M=c[31].bucket)==null?void 0:M.values)||[]);let _;for(_=0;_<Y.length;_+=1){const O=Le(c,Y,_);X[_]?X[_].p(O,b):(X[_]=ze(O),X[_].c(),X[_].m(e,m))}for(;_<X.length;_+=1)X[_].d(1);X.length=Y.length}c[31].bucket?z?z.p(we(c),b):(z=je(we(c)),z.c(),z.m(e,null)):z&&(z.d(1),z=null),b[0]&2&&o!==(o=`translate(${c[31].x}, ${c[31].y})`)&&i(e,"transform",o)},d(c){c&&I(e),re(A,c),re(P,c),re(X,c),z&&z.d()}}}function Ye(t){let e,n,l,s,r=t[39]+"",f,h,d;return{c(){e=R("rect"),s=R("text"),f=J(r),i(e,"x",n=t[31].padding+t[37]*Q),i(e,"y",l=t[31].padding),i(e,"width",Q),i(e,"height",T),i(e,"fill","#eee"),i(e,"stroke","#000"),i(s,"x",h=t[31].padding+t[37]*Q+Q/2),i(s,"y",d=t[31].padding+T/1.5),i(s,"font-size","12"),i(s,"text-anchor","middle")},m(u,m){D(u,e,m),D(u,s,m),C(s,f)},p(u,m){m[0]&2&&n!==(n=u[31].padding+u[37]*Q)&&i(e,"x",n),m[0]&2&&l!==(l=u[31].padding)&&i(e,"y",l),m[0]&2&&r!==(r=u[39]+"")&&te(f,r),m[0]&2&&h!==(h=u[31].padding+u[37]*Q+Q/2)&&i(s,"x",h),m[0]&2&&d!==(d=u[31].padding+T/1.5)&&i(s,"y",d)},d(u){u&&(I(e),I(s))}}}function Xe(t){let e,n,l,s,r,f,h=(t[24]??"")+"",d,u,m;return{c(){e=R("rect"),f=R("text"),d=J(h),i(e,"x",n=t[31].padding),i(e,"y",l=t[31].padding+T+t[37]*E),i(e,"width",s=t[31].width-U*2),i(e,"height",E),i(e,"fill",r=t[24]==null?"#dbfdc9":"#b2f2bb"),i(e,"stroke","#12b886"),i(e,"class","cell-key svelte-x4wxi1"),i(f,"x",u=t[31].padding+6),i(f,"y",m=t[31].padding+T+t[37]*E+E/1.5),i(f,"font-size","13")},m(o,p){D(o,e,p),D(o,f,p),C(f,d)},p(o,p){p[0]&2&&n!==(n=o[31].padding)&&i(e,"x",n),p[0]&2&&l!==(l=o[31].padding+T+o[37]*E)&&i(e,"y",l),p[0]&2&&s!==(s=o[31].width-U*2)&&i(e,"width",s),p[0]&2&&r!==(r=o[24]==null?"#dbfdc9":"#b2f2bb")&&i(e,"fill",r),p[0]&2&&h!==(h=(o[24]??"")+"")&&te(d,h),p[0]&2&&u!==(u=o[31].padding+6)&&i(f,"x",u),p[0]&2&&m!==(m=o[31].padding+T+o[37]*E+E/1.5)&&i(f,"y",m)},d(o){o&&(I(e),I(f))}}}function ze(t){let e,n,l,s,r,f,h=(t[25]??"")+"",d,u,m;return{c(){e=R("rect"),f=R("text"),d=J(h),i(e,"x",n=t[31].padding),i(e,"y",l=t[31].padding+T+t[34]*E+t[37]*E),i(e,"width",s=t[31].width-U*2),i(e,"height",E),i(e,"fill",r=t[25]==null?"#fff2b8":"#ffec99"),i(e,"stroke","#ffa94d"),i(e,"class","cell-value svelte-x4wxi1"),i(f,"x",u=t[31].padding+6),i(f,"y",m=t[31].padding+T+t[34]*E+t[37]*E+E/1.5),i(f,"font-size","13")},m(o,p){D(o,e,p),D(o,f,p),C(f,d)},p(o,p){p[0]&2&&n!==(n=o[31].padding)&&i(e,"x",n),p[0]&2&&l!==(l=o[31].padding+T+o[34]*E+o[37]*E)&&i(e,"y",l),p[0]&2&&s!==(s=o[31].width-U*2)&&i(e,"width",s),p[0]&2&&r!==(r=o[25]==null?"#fff2b8":"#ffec99")&&i(e,"fill",r),p[0]&2&&h!==(h=(o[25]??"")+"")&&te(d,h),p[0]&2&&u!==(u=o[31].padding+6)&&i(f,"x",u),p[0]&2&&m!==(m=o[31].padding+T+o[34]*E+o[37]*E+E/1.5)&&i(f,"y",m)},d(o){o&&(I(e),I(f))}}}function je(t){let e,n,l,s,r,f=(t[31].bucket.overflow||"")+"",h,d,u;return{c(){e=R("rect"),r=R("text"),h=J(f),i(e,"x",n=t[31].padding),i(e,"y",l=t[31].padding+T+t[34]*E+t[35]*E),i(e,"width",s=t[31].width-U*2),i(e,"height",E),i(e,"fill","#ddd"),i(e,"stroke","#000"),i(r,"x",d=t[31].padding+6),i(r,"y",u=t[31].padding+T+t[34]*E+t[35]*E+E/1.5),i(r,"font-size","12")},m(m,o){D(m,e,o),D(m,r,o),C(r,h)},p(m,o){o[0]&2&&n!==(n=m[31].padding)&&i(e,"x",n),o[0]&2&&l!==(l=m[31].padding+T+m[34]*E+m[35]*E)&&i(e,"y",l),o[0]&2&&s!==(s=m[31].width-U*2)&&i(e,"width",s),o[0]&2&&f!==(f=(m[31].bucket.overflow||"")+"")&&te(h,f),o[0]&2&&d!==(d=m[31].padding+6)&&i(r,"x",d),o[0]&2&&u!==(u=m[31].padding+T+m[34]*E+m[35]*E+E/1.5)&&i(r,"y",u)},d(m){m&&(I(e),I(r))}}}function Re(t,e){let n,l,s=e[31].x+e[31].width>e[4].x&&e[31].x<e[4].x+e[4].w&&e[31].y+e[31].height>e[4].y&&e[31].y<e[4].y+e[4].h&&Ne(e);return{key:t,first:null,c(){n=ee(),s&&s.c(),l=ee(),this.first=n},m(r,f){D(r,n,f),s&&s.m(r,f),D(r,l,f)},p(r,f){e=r,e[31].x+e[31].width>e[4].x&&e[31].x<e[4].x+e[4].w&&e[31].y+e[31].height>e[4].y&&e[31].y<e[4].y+e[4].h?s?s.p(e,f):(s=Ne(e),s.c(),s.m(l.parentNode,l)):s&&(s.d(1),s=null)},d(r){r&&(I(n),I(l)),s&&s.d(r)}}}function Ie(t){let e,n,l,s,r,f,h;return{c(){e=R("line"),i(e,"x1",n=t[28].x),i(e,"y1",l=t[28].y1),i(e,"x2",s=t[28].x),i(e,"y2",r=t[28].y2),i(e,"stroke",f=t[28].isOld?"#ff6b6b":"#000"),i(e,"stroke-width","2"),i(e,"marker-end",h=t[28].isOld?"url(#arrow-old)":"url(#arrow)")},m(d,u){D(d,e,u)},p(d,u){u[0]&4&&n!==(n=d[28].x)&&i(e,"x1",n),u[0]&4&&l!==(l=d[28].y1)&&i(e,"y1",l),u[0]&4&&s!==(s=d[28].x)&&i(e,"x2",s),u[0]&4&&r!==(r=d[28].y2)&&i(e,"y2",r),u[0]&4&&f!==(f=d[28].isOld?"#ff6b6b":"#000")&&i(e,"stroke",f),u[0]&4&&h!==(h=d[28].isOld?"url(#arrow-old)":"url(#arrow)")&&i(e,"marker-end",h)},d(d){d&&I(e)}}}function De(t){let e,n=t[28].x>t[4].x&&t[28].x<t[4].x+t[4].w&&Ie(t);return{c(){n&&n.c(),e=ee()},m(l,s){n&&n.m(l,s),D(l,e,s)},p(l,s){l[28].x>l[4].x&&l[28].x<l[4].x+l[4].w?n?n.p(l,s):(n=Ie(l),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(l){l&&I(e),n&&n.d(l)}}}function Te(t){let e,n,l;return{c(){e=$("div"),i(e,"class","splitter svelte-x4wxi1")},m(s,r){D(s,e,r),n||(l=ie(e,"mousedown",t[11]),n=!0)},p:ae,d(s){s&&I(e),n=!1,l()}}}function He(t){let e,n=x(Object.entries(t[0])),l=[];for(let s=0;s<n.length;s+=1)l[s]=xe(Me(t,n,s));return{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=ee()},m(s,r){for(let f=0;f<l.length;f+=1)l[f]&&l[f].m(s,r);D(s,e,r)},p(s,r){if(r[0]&1){n=x(Object.entries(s[0]));let f;for(f=0;f<n.length;f+=1){const h=Me(s,n,f);l[f]?l[f].p(h,r):(l[f]=xe(h),l[f].c(),l[f].m(e.parentNode,e))}for(;f<l.length;f+=1)l[f].d(1);l.length=n.length}},d(s){s&&I(e),re(l,s)}}}function xe(t){let e,n,l=t[24]+"",s,r,f=t[25]+"",h;return{c(){e=$("div"),n=$("span"),s=J(l),r=$("b"),h=J(f),i(e,"class","row svelte-x4wxi1")},m(d,u){D(d,e,u),C(e,n),C(n,s),C(e,r),C(r,h)},p(d,u){u[0]&1&&l!==(l=d[24]+"")&&te(s,l),u[0]&1&&f!==(f=d[25]+"")&&te(h,f)},d(d){d&&I(e)}}}function mt(t){let e,n,l,s=t[6]?"→":"← hmap",r,f,h,d,u,m,o,p,A,W,P,Y=[],X=new Map,z,K,G,V,c,b,B,y,M,_=x(t[3]),O=[];for(let a=0;a<_.length;a+=1)O[a]=Pe(We(t,_,a));let S=x(t[1]);const j=a=>a[31].id;for(let a=0;a<S.length;a+=1){let k=Ee(t,S,a),g=j(k);X.set(g,Y[a]=Re(g,k))}let H=x(t[2]),N=[];for(let a=0;a<H.length;a+=1)N[a]=De(Se(t,H,a));let v=t[6]&&Te(t),L=t[0]&&He(t);return{c(){e=$("div"),n=$("div"),l=$("button"),r=J(s),f=_e(),h=R("svg"),d=R("defs"),u=R("marker"),m=R("path"),o=R("marker"),p=R("path"),A=R("filter"),W=R("feDropShadow");for(let a=0;a<O.length;a+=1)O[a].c();P=ee();for(let a=0;a<Y.length;a+=1)Y[a].c();z=ee();for(let a=0;a<N.length;a+=1)N[a].c();G=_e(),v&&v.c(),V=_e(),c=$("div"),b=$("h3"),b.textContent="hmap",B=_e(),L&&L.c(),i(l,"class","toggle-btn svelte-x4wxi1"),i(m,"d","M0,0 L6,3 L0,6 Z"),i(m,"fill","#000"),i(u,"id","arrow"),i(u,"markerWidth","6"),i(u,"markerHeight","6"),i(u,"refX","3"),i(u,"refY","3"),i(u,"orient","auto"),i(p,"d","M0,0 L6,3 L0,6 Z"),i(p,"fill","#ff6b6b"),i(o,"id","arrow-old"),i(o,"markerWidth","6"),i(o,"markerHeight","6"),i(o,"refX","3"),i(o,"refY","3"),i(o,"orient","auto"),i(W,"dx","4"),i(W,"dy","4"),i(W,"stdDeviation","1"),i(W,"flood-color","#51cf66"),i(W,"flood-opacity","0.5"),i(A,"id","bucket-shadow"),i(A,"x","-30%"),i(A,"y","-30%"),i(A,"width","140%"),i(A,"height","140%"),i(h,"viewBox",K=t[4].x+" "+t[4].y+" "+t[4].w+" "+t[4].h),i(h,"width","100%"),i(h,"height","100%"),i(h,"preserveAspectRatio","xMinYMin meet"),i(h,"class","svelte-x4wxi1"),i(n,"id","svg-container"),i(n,"class","svelte-x4wxi1"),i(c,"class","side svelte-x4wxi1"),ge(c,"width",t[5]+"px"),ge(c,"display",t[6]?"block":"none"),i(e,"class","root svelte-x4wxi1")},m(a,k){D(a,e,k),C(e,n),C(n,l),C(l,r),C(n,f),C(n,h),C(h,d),C(d,u),C(u,m),C(d,o),C(o,p),C(d,A),C(A,W);for(let g=0;g<O.length;g+=1)O[g]&&O[g].m(h,null);C(h,P);for(let g=0;g<Y.length;g+=1)Y[g]&&Y[g].m(h,null);C(h,z);for(let g=0;g<N.length;g+=1)N[g]&&N[g].m(h,null);C(e,G),v&&v.m(e,null),C(e,V),C(e,c),C(c,b),C(c,B),L&&L.m(c,null),y||(M=[ie(l,"click",t[12]),ie(n,"wheel",t[7],{passive:!1}),ie(n,"mousedown",t[8]),ie(n,"mousemove",t[10]),ie(n,"mouseup",t[9]),ie(n,"mouseleave",t[9])],y=!0)},p(a,k){if(k[0]&64&&s!==(s=a[6]?"→":"← hmap")&&te(r,s),k[0]&8){_=x(a[3]);let g;for(g=0;g<_.length;g+=1){const w=We(a,_,g);O[g]?O[g].p(w,k):(O[g]=Pe(w),O[g].c(),O[g].m(h,P))}for(;g<O.length;g+=1)O[g].d(1);O.length=_.length}if(k[0]&18&&(S=x(a[1]),Y=at(Y,k,j,1,a,S,X,h,ut,Re,z,Ee)),k[0]&20){H=x(a[2]);let g;for(g=0;g<H.length;g+=1){const w=Se(a,H,g);N[g]?N[g].p(w,k):(N[g]=De(w),N[g].c(),N[g].m(h,null))}for(;g<N.length;g+=1)N[g].d(1);N.length=H.length}k[0]&16&&K!==(K=a[4].x+" "+a[4].y+" "+a[4].w+" "+a[4].h)&&i(h,"viewBox",K),a[6]?v?v.p(a,k):(v=Te(a),v.c(),v.m(e,V)):v&&(v.d(1),v=null),a[0]?L?L.p(a,k):(L=He(a),L.c(),L.m(c,null)):L&&(L.d(1),L=null),k[0]&32&&ge(c,"width",a[5]+"px"),k[0]&64&&ge(c,"display",a[6]?"block":"none")},i:ae,o:ae,d(a){a&&I(e),re(O,a);for(let k=0;k<Y.length;k+=1)Y[k].d();re(N,a),v&&v.d(),L&&L.d(),y=!1,he(M)}}}const T=24,E=22,oe=80,q=40,Fe=4,Ke=12,U=12,Ue=1.5,Q=27;function wt(t,e,n){let l=[],s=[],r=[],f=[],h=null,d=[],u=[],m=[],o={x:0,y:0,w:1200,h:900},p=280,A=280,W=!0,P=!1,Y=!1;async function X(){try{const[y,M,_]=await Promise.all([fetch("/vizual").catch(()=>null),fetch("/vizual_old").catch(()=>null),fetch("/hmap").catch(()=>null)]);if(y!=null&&y.ok&&(l=await y.json(),Array.isArray(l)||(l=[])),M!=null&&M.ok&&(s=await M.json(),Array.isArray(s)||(s=[])),_!=null&&_.ok&&n(0,h=await _.json()),r=[],Array.isArray(l)){let S=[];for(const j of l)j&&j.type==="main"?(S.length&&r.push(S),S=[j]):j&&S.push(j);S.length&&r.push(S)}if(f=[],Array.isArray(s)){let S=[];for(const j of s)j&&j.type==="main"?(S.length&&f.push(S),S=[j]):j&&S.push(j);S.length&&f.push(S)}z();const O=document.getElementById("svg-container");if(O){const S=O.getBoundingClientRect(),j=S.height/S.width;n(4,o.w=1200,o),n(4,o.h=1200*j,o),n(4,o)}}catch(y){console.error("Ошибка загрузки данных:",y)}}function z(){n(1,d=[]),n(2,u=[]),n(3,m=[]);const y=f&&f.length>0,M=r&&r.length>0,_=y&&M;y&&f.forEach(v=>{v&&v.length>0}),M&&r.forEach(v=>{v&&v.length>0});const O=[];for(let v=0;v<Math.max(y?f.length:0,M?r.length:0);v++){let L=260;if(y&&v<f.length&&f[v]&&f[v].length>0){const a=f[v],k=Math.max(...a.map(w=>w.tophash&&Array.isArray(w.tophash)?w.tophash.length:0))*Q,g=a.map(w=>{const ne=w.keys&&Array.isArray(w.keys)?w.keys:[],le=w.values&&Array.isArray(w.values)?w.values:[];return Math.max(...ne.map(Z=>Z?Z.toString().length:0),...le.map(Z=>Z?Z.toString().length:0),w.overflow?w.overflow.toString().length:0,0)*8+U*2});L=Math.max(L,...g,k)}if(M&&v<r.length&&r[v]&&r[v].length>0){const a=r[v],k=Math.max(...a.map(w=>w.tophash&&Array.isArray(w.tophash)?w.tophash.length:0))*Q,g=a.map(w=>{const ne=w.keys&&Array.isArray(w.keys)?w.keys:[],le=w.values&&Array.isArray(w.values)?w.values:[];return Math.max(...ne.map(Z=>Z?Z.toString().length:0),...le.map(Z=>Z?Z.toString().length:0),w.overflow?w.overflow.toString().length:0,0)*8+U*2});L=Math.max(L,...g,k)}O.push(L)}let S=oe,j=0,H=q+(_?30:0),N=q;if(y){for(let v=0;v<f.length;v++){const L=f[v];if(!L||L.length===0)continue;const a=O[v]||260;let k=H;for(let g=0;g<L.length;g++){const w=L[g];if(!w)continue;const ne=w.keys&&Array.isArray(w.keys)?w.keys:[],le=w.values&&Array.isArray(w.values)?w.values:[],F=T+ne.length*E+le.length*E+E+U*2;d.push({id:`old-${w.id}`,x:S,y:k,width:a,height:F,bucket:w,padding:U,isOld:!0}),g<L.length-1&&u.push({x:S+a/2,y1:k+F,y2:k+F+q-Fe,isOld:!0}),k+=F+q,k>j&&(j=k)}S+=a+oe}_&&m.push({x:oe,y:q+20,text:"OLD",isOld:!0}),N=j+q*2}if(M){S=oe;for(let v=0;v<r.length;v++){const L=r[v];if(!L||L.length===0)continue;const a=O[v]||260;let k=N;for(let g=0;g<L.length;g++){const w=L[g];if(!w)continue;const ne=w.keys&&Array.isArray(w.keys)?w.keys:[],le=w.values&&Array.isArray(w.values)?w.values:[],F=T+ne.length*E+le.length*E+E+U*2;d.push({id:w.id,x:S,y:k,width:a,height:F,bucket:w,padding:U,isOld:!1}),g<L.length-1&&u.push({x:S+a/2,y1:k+F,y2:k+F+q-Fe,isOld:!1}),k+=F+q}S+=a+oe}_&&m.push({x:oe,y:N-q+20,text:"NEW",isOld:!1})}}function K(y){y.preventDefault();const M=y.currentTarget.getBoundingClientRect();if(y.ctrlKey||y.metaKey){const _=y.clientX-M.left,O=y.clientY-M.top,S=o.x+_*o.w/M.width,j=o.y+O*o.h/M.height,H=Math.pow(1.001,y.deltaY*5),N=o.w*H,v=o.h*H;if(N<100||N>4e4)return;n(4,o.x=S-_/M.width*N,o),n(4,o.y=j-O/M.height*v,o),n(4,o.w=N,o),n(4,o.h=v,o)}else n(4,o.x+=y.deltaX*o.w/M.width,o),n(4,o.y+=y.deltaY*o.h/M.height,o);n(4,o)}function G(y){y.button===0&&(Y=!0)}function V(){Y=!1}function c(y){if(Y){const M=document.getElementById("svg-container").getBoundingClientRect();n(4,o.x-=y.movementX*o.w/M.width,o),n(4,o.y-=y.movementY*o.h/M.height,o),n(4,o)}}function b(y){P=!0;const M=y.clientX,_=p,S=document.getElementById("svg-container").getBoundingClientRect(),j=o.w/S.width;S.height/S.width;const H=v=>{if(!P)return;const L=M-v.clientX,a=Math.max(100,Math.min(800,_+L)),k=a-p;n(5,p=a),n(4,o.w-=k*j,o);const g=S.width-(a-_);n(4,o.h=o.w*(S.height/g),o),n(4,o)},N=()=>{P=!1,window.removeEventListener("mousemove",H),window.removeEventListener("mouseup",N)};window.addEventListener("mousemove",H),window.addEventListener("mouseup",N)}function B(){const y=document.getElementById("svg-container"),M=y.getBoundingClientRect(),_=o.w/M.width;W?(A=p,n(4,o.w+=p*_,o),n(5,p=0),n(6,W=!1)):(n(5,p=A),n(4,o.w-=p*_,o),n(6,W=!0)),setTimeout(()=>{const O=y.getBoundingClientRect();n(4,o.h=o.w*(O.height/O.width),o),n(4,o)},0)}return lt(X),[h,d,u,m,o,p,W,K,G,V,c,b,B]}class yt extends gt{constructor(e){super(),_t(this,e,wt,mt,$e,{},null,[-1,-1])}}new yt({target:document.getElementById("app")});
