var _e=Object.defineProperty;var de=(t,e,n)=>e in t?_e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var F=(t,e,n)=>(de(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const h of o)if(h.type==="childList")for(const d of h.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const h={};return o.integrity&&(h.integrity=o.integrity),o.referrerPolicy&&(h.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?h.credentials="include":o.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function i(o){if(o.ep)return;o.ep=!0;const h=n(o);fetch(o.href,h)}})();function I(){}function ce(t){return t()}function Z(){return Object.create(null)}function x(t){t.forEach(ce)}function he(t){return typeof t=="function"}function ge(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function pe(t){return Object.keys(t).length===0}function K(t,e){t.appendChild(e)}function L(t,e,n){t.insertBefore(e,n||null)}function V(t){t.parentNode&&t.parentNode.removeChild(t)}function C(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function $(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Y(t){return document.createTextNode(t)}function R(){return Y("")}function l(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function me(t){return Array.from(t.childNodes)}function W(t,e){e=""+e,t.data!==e&&(t.data=e)}let M;function H(t){M=t}function we(){if(!M)throw new Error("Function called outside component initialization");return M}function be(t){we().$$.on_mount.push(t)}const P=[],D=[];let j=[];const J=[],ye=Promise.resolve();let T=!1;function ve(){T||(T=!0,ye.then(ae))}function U(t){j.push(t)}const X=new Set;let z=0;function ae(){if(z!==0)return;const t=M;do{try{for(;z<P.length;){const e=P[z];z++,H(e),ke(e.$$)}}catch(e){throw P.length=0,z=0,e}for(H(null),P.length=0,z=0;D.length;)D.pop()();for(let e=0;e<j.length;e+=1){const n=j[e];X.has(n)||(X.add(n),n())}j.length=0}while(P.length);for(;J.length;)J.pop()();T=!1,X.clear(),H(t)}function ke(t){if(t.fragment!==null){t.update(),x(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(U)}}function $e(t){const e=[],n=[];j.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),j=e}const Ke=new Set;function Oe(t,e){t&&t.i&&(Ke.delete(t),t.i(e))}function N(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Ee(t,e,n){const{fragment:i,after_update:o}=t.$$;i&&i.m(e,n),U(()=>{const h=t.$$.on_mount.map(ce).filter(he);t.$$.on_destroy?t.$$.on_destroy.push(...h):x(h),t.$$.on_mount=[]}),o.forEach(U)}function Ae(t,e){const n=t.$$;n.fragment!==null&&($e(n.after_update),x(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Ne(t,e){t.$$.dirty[0]===-1&&(P.push(t),ve(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Ve(t,e,n,i,o,h,d=null,a=[-1]){const r=M;H(t);const _=t.$$={fragment:null,ctx:[],props:h,update:I,not_equal:o,bound:Z(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(r?r.$$.context:[])),callbacks:Z(),dirty:a,skip_bound:!1,root:e.target||r.$$.root};d&&d(_.root);let p=!1;if(_.ctx=n?n(t,e.props||{},(u,m,...s)=>{const w=s.length?s[0]:m;return _.ctx&&o(_.ctx[u],_.ctx[u]=w)&&(!_.skip_bound&&_.bound[u]&&_.bound[u](w),p&&Ne(t,u)),m}):[],_.update(),p=!0,x(_.before_update),_.fragment=i?i(_.ctx):!1,e.target){if(e.hydrate){const u=me(e.target);_.fragment&&_.fragment.l(u),u.forEach(V)}else _.fragment&&_.fragment.c();e.intro&&Oe(t.$$.fragment),Ee(t,e.target,e.anchor),ae()}H(r)}class Le{constructor(){F(this,"$$");F(this,"$$set")}$destroy(){Ae(this,1),this.$destroy=I}$on(e,n){if(!he(n))return I;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const o=i.indexOf(n);o!==-1&&i.splice(o,1)}}$set(e){this.$$set&&!pe(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Se="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Se);function Q(t,e,n){const i=t.slice();return i[8]=e[n],i}function ee(t,e,n){const i=t.slice();return i[11]=e[n],i}function te(t,e,n){const i=t.slice();return i[14]=e[n],i[16]=n,i}function ne(t,e,n){const i=t.slice();return i[17]=e[n],i[16]=n,i}function le(t,e,n){const i=t.slice();return i[19]=e[n],i[16]=n,i}function ie(t){let e,n,i,o,h=t[19]+"",d,a;return{c(){e=$("rect"),o=$("text"),d=Y(h),l(e,"x",n=t[11].width/8*t[16]),l(e,"y",0),l(e,"width",i=t[11].width/8),l(e,"height",O),l(e,"fill","#eee"),l(e,"stroke","#000"),l(o,"x",a=t[11].width/8*t[16]+t[11].width/16),l(o,"y",O/1.5),l(o,"font-size","12"),l(o,"text-anchor","middle")},m(r,_){L(r,e,_),L(r,o,_),K(o,d)},p(r,_){_&1&&n!==(n=r[11].width/8*r[16])&&l(e,"x",n),_&1&&i!==(i=r[11].width/8)&&l(e,"width",i),_&1&&h!==(h=r[19]+"")&&W(d,h),_&1&&a!==(a=r[11].width/8*r[16]+r[11].width/16)&&l(o,"x",a)},d(r){r&&(V(e),V(o))}}}function oe(t){let e,n,i,o=(t[17]??"")+"",h;return{c(){e=$("rect"),i=$("text"),h=Y(o),l(e,"x",0),l(e,"y",O+t[16]*g),l(e,"width",n=t[11].width),l(e,"height",g),l(e,"fill","#f9f9f9"),l(e,"stroke","#aaa"),l(i,"x",6),l(i,"y",O+t[16]*g+g/1.5),l(i,"font-size","13")},m(d,a){L(d,e,a),L(d,i,a),K(i,h)},p(d,a){a&1&&n!==(n=d[11].width)&&l(e,"width",n),a&1&&o!==(o=(d[17]??"")+"")&&W(h,o)},d(d){d&&(V(e),V(i))}}}function re(t){let e,n,i,o,h=(t[14]??"")+"",d,a;return{c(){e=$("rect"),o=$("text"),d=Y(h),l(e,"x",0),l(e,"y",n=O+t[11].bucket.Keys.length*g+t[16]*g),l(e,"width",i=t[11].width),l(e,"height",g),l(e,"fill","#f0f0f0"),l(e,"stroke","#aaa"),l(o,"x",6),l(o,"y",a=O+t[11].bucket.Keys.length*g+t[16]*g+g/1.5),l(o,"font-size","13")},m(r,_){L(r,e,_),L(r,o,_),K(o,d)},p(r,_){_&1&&n!==(n=O+r[11].bucket.Keys.length*g+r[16]*g)&&l(e,"y",n),_&1&&i!==(i=r[11].width)&&l(e,"width",i),_&1&&h!==(h=(r[14]??"")+"")&&W(d,h),_&1&&a!==(a=O+r[11].bucket.Keys.length*g+r[16]*g+g/1.5)&&l(o,"y",a)},d(r){r&&(V(e),V(o))}}}function fe(t){let e,n,i,o,h,d,a,r,_,p,u=t[11].bucket.overflow+"",m,s,w,E=N(t[11].bucket.tophash),b=[];for(let c=0;c<E.length;c+=1)b[c]=ie(le(t,E,c));let A=N(t[11].bucket.Keys),y=[];for(let c=0;c<A.length;c+=1)y[c]=oe(ne(t,A,c));let B=N(t[11].bucket.Values),v=[];for(let c=0;c<B.length;c+=1)v[c]=re(te(t,B,c));return{c(){e=$("g"),n=$("rect");for(let c=0;c<b.length;c+=1)b[c].c();h=R();for(let c=0;c<y.length;c+=1)y[c].c();d=R();for(let c=0;c<v.length;c+=1)v[c].c();a=$("rect"),p=$("text"),m=Y(u),l(n,"width",i=t[11].width),l(n,"height",o=t[11].height),l(n,"fill","#fff"),l(n,"stroke","#000"),l(n,"stroke-width","2"),l(a,"x",0),l(a,"y",r=O+t[11].bucket.Keys.length*g+t[11].bucket.Values.length*g),l(a,"width",_=t[11].width),l(a,"height",g),l(a,"fill","#ddd"),l(a,"stroke","#000"),l(p,"x",6),l(p,"y",s=O+t[11].bucket.Keys.length*g+t[11].bucket.Values.length*g+g/1.5),l(p,"font-size","12"),l(e,"transform",w=`translate(${t[11].x}, ${t[11].y})`)},m(c,k){L(c,e,k),K(e,n);for(let f=0;f<b.length;f+=1)b[f]&&b[f].m(e,null);K(e,h);for(let f=0;f<y.length;f+=1)y[f]&&y[f].m(e,null);K(e,d);for(let f=0;f<v.length;f+=1)v[f]&&v[f].m(e,null);K(e,a),K(e,p),K(p,m)},p(c,k){if(k&1&&i!==(i=c[11].width)&&l(n,"width",i),k&1&&o!==(o=c[11].height)&&l(n,"height",o),k&1){E=N(c[11].bucket.tophash);let f;for(f=0;f<E.length;f+=1){const S=le(c,E,f);b[f]?b[f].p(S,k):(b[f]=ie(S),b[f].c(),b[f].m(e,h))}for(;f<b.length;f+=1)b[f].d(1);b.length=E.length}if(k&1){A=N(c[11].bucket.Keys);let f;for(f=0;f<A.length;f+=1){const S=ne(c,A,f);y[f]?y[f].p(S,k):(y[f]=oe(S),y[f].c(),y[f].m(e,d))}for(;f<y.length;f+=1)y[f].d(1);y.length=A.length}if(k&1){B=N(c[11].bucket.Values);let f;for(f=0;f<B.length;f+=1){const S=te(c,B,f);v[f]?v[f].p(S,k):(v[f]=re(S),v[f].c(),v[f].m(e,a))}for(;f<v.length;f+=1)v[f].d(1);v.length=B.length}k&1&&r!==(r=O+c[11].bucket.Keys.length*g+c[11].bucket.Values.length*g)&&l(a,"y",r),k&1&&_!==(_=c[11].width)&&l(a,"width",_),k&1&&u!==(u=c[11].bucket.overflow+"")&&W(m,u),k&1&&s!==(s=O+c[11].bucket.Keys.length*g+c[11].bucket.Values.length*g+g/1.5)&&l(p,"y",s),k&1&&w!==(w=`translate(${c[11].x}, ${c[11].y})`)&&l(e,"transform",w)},d(c){c&&V(e),C(b,c),C(y,c),C(v,c)}}}function se(t){let e,n,i,o,h;return{c(){e=$("line"),l(e,"x1",n=t[8].x),l(e,"y1",i=t[8].y1),l(e,"x2",o=t[8].x),l(e,"y2",h=t[8].y2),l(e,"stroke","#000"),l(e,"stroke-width","2"),l(e,"marker-end","url(#arrow)")},m(d,a){L(d,e,a)},p(d,a){a&2&&n!==(n=d[8].x)&&l(e,"x1",n),a&2&&i!==(i=d[8].y1)&&l(e,"y1",i),a&2&&o!==(o=d[8].x)&&l(e,"x2",o),a&2&&h!==(h=d[8].y2)&&l(e,"y2",h)},d(d){d&&V(e)}}}function Be(t){let e,n,i,o,h,d,a=N(t[0]),r=[];for(let u=0;u<a.length;u+=1)r[u]=fe(ee(t,a,u));let _=N(t[1]),p=[];for(let u=0;u<_.length;u+=1)p[u]=se(Q(t,_,u));return{c(){e=$("svg"),n=$("defs"),i=$("marker"),o=$("path");for(let u=0;u<r.length;u+=1)r[u].c();h=R();for(let u=0;u<p.length;u+=1)p[u].c();l(o,"d","M0,0 L6,3 L0,6 Z"),l(o,"fill","#000"),l(i,"id","arrow"),l(i,"markerWidth","6"),l(i,"markerHeight","6"),l(i,"refX","3"),l(i,"refY","3"),l(i,"orient","auto"),l(e,"width","100%"),l(e,"height","100%"),l(e,"viewBox",d=`0 0 ${t[2]} ${t[3]}`),l(e,"class","svelte-ik8ch3")},m(u,m){L(u,e,m),K(e,n),K(n,i),K(i,o);for(let s=0;s<r.length;s+=1)r[s]&&r[s].m(e,null);K(e,h);for(let s=0;s<p.length;s+=1)p[s]&&p[s].m(e,null)},p(u,[m]){if(m&1){a=N(u[0]);let s;for(s=0;s<a.length;s+=1){const w=ee(u,a,s);r[s]?r[s].p(w,m):(r[s]=fe(w),r[s].c(),r[s].m(e,h))}for(;s<r.length;s+=1)r[s].d(1);r.length=a.length}if(m&2){_=N(u[1]);let s;for(s=0;s<_.length;s+=1){const w=Q(u,_,s);p[s]?p[s].p(w,m):(p[s]=se(w),p[s].c(),p[s].m(e,null))}for(;s<p.length;s+=1)p[s].d(1);p.length=_.length}m&12&&d!==(d=`0 0 ${u[2]} ${u[3]}`)&&l(e,"viewBox",d)},i:I,o:I,d(u){u&&V(e),C(r,u),C(p,u)}}}const q=260,O=24,g=22,ue=60,G=40,ze=4;function Pe(t,e,n){let i=[],o=[],h=[],d=[],a=2e3,r=2e3;async function _(){i=await(await fetch("/vizual")).json(),o=[];let m=[];for(const s of i)s.type==="main"?(m.length&&o.push(m),m=[s]):m.push(s);m.length&&o.push(m),p()}function p(){n(0,h=[]),n(1,d=[]);let u=ue,m=0;for(const s of o){let w=G;for(let E=0;E<s.length;E++){const b=s[E],A=O+b.Keys.length*g+b.Values.length*g+g;if(h.push({id:b.id,x:u,y:w,width:q,height:A,bucket:b}),E<s.length-1){const y=w+A+G;d.push({x:u+q/2,y1:w+A,y2:y-ze}),w=y}else w+=A+G;w>m&&(m=w)}u+=q+ue}n(2,a=u+200),n(3,r=m+200)}return be(_),[h,d,a,r]}class je extends Le{constructor(e){super(),Ve(this,e,Pe,Be,ge,{})}}new je({target:document.getElementById("app")});
