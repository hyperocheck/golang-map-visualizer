var _e=Object.defineProperty;var de=(t,e,n)=>e in t?_e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var X=(t,e,n)=>(de(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function I(){}function ce(t){return t()}function D(){return Object.create(null)}function W(t){t.forEach(ce)}function he(t){return typeof t=="function"}function ge(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function pe(t){return Object.keys(t).length===0}function K(t,e){t.appendChild(e)}function L(t,e,n){t.insertBefore(e,n||null)}function V(t){t.parentNode&&t.parentNode.removeChild(t)}function C(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function $(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Y(t){return document.createTextNode(t)}function T(){return Y("")}function l(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function me(t){return Array.from(t.childNodes)}function F(t,e){e=""+e,t.data!==e&&(t.data=e)}let M;function H(t){M=t}function be(){if(!M)throw new Error("Function called outside component initialization");return M}function we(t){be().$$.on_mount.push(t)}const P=[],J=[];let j=[];const Q=[],ve=Promise.resolve();let U=!1;function ye(){U||(U=!0,ve.then(ae))}function Z(t){j.push(t)}const q=new Set;let z=0;function ae(){if(z!==0)return;const t=M;do{try{for(;z<P.length;){const e=P[z];z++,H(e),ke(e.$$)}}catch(e){throw P.length=0,z=0,e}for(H(null),P.length=0,z=0;J.length;)J.pop()();for(let e=0;e<j.length;e+=1){const n=j[e];q.has(n)||(q.add(n),n())}j.length=0}while(P.length);for(;Q.length;)Q.pop()();U=!1,q.clear(),H(t)}function ke(t){if(t.fragment!==null){t.update(),W(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Z)}}function $e(t){const e=[],n=[];j.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),j=e}const Ke=new Set;function Oe(t,e){t&&t.i&&(Ke.delete(t),t.i(e))}function N(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Ee(t,e,n){const{fragment:i,after_update:o}=t.$$;i&&i.m(e,n),Z(()=>{const u=t.$$.on_mount.map(ce).filter(he);t.$$.on_destroy?t.$$.on_destroy.push(...u):W(u),t.$$.on_mount=[]}),o.forEach(Z)}function Ae(t,e){const n=t.$$;n.fragment!==null&&($e(n.after_update),W(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Ne(t,e){t.$$.dirty[0]===-1&&(P.push(t),ye(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Ve(t,e,n,i,o,u,d=null,_=[-1]){const f=M;H(t);const s=t.$$={fragment:null,ctx:[],props:u,update:I,not_equal:o,bound:D(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(f?f.$$.context:[])),callbacks:D(),dirty:_,skip_bound:!1,root:e.target||f.$$.root};d&&d(s.root);let g=!1;if(s.ctx=n?n(t,e.props||{},(h,m,...c)=>{const b=c.length?c[0]:m;return s.ctx&&o(s.ctx[h],s.ctx[h]=b)&&(!s.skip_bound&&s.bound[h]&&s.bound[h](b),g&&Ne(t,h)),m}):[],s.update(),g=!0,W(s.before_update),s.fragment=i?i(s.ctx):!1,e.target){if(e.hydrate){const h=me(e.target);s.fragment&&s.fragment.l(h),h.forEach(V)}else s.fragment&&s.fragment.c();e.intro&&Oe(t.$$.fragment),Ee(t,e.target,e.anchor),ae()}H(f)}class Le{constructor(){X(this,"$$");X(this,"$$set")}$destroy(){Ae(this,1),this.$destroy=I}$on(e,n){if(!he(n))return I;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const o=i.indexOf(n);o!==-1&&i.splice(o,1)}}$set(e){this.$$set&&!pe(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Se="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Se);function x(t,e,n){const i=t.slice();return i[8]=e[n],i}function ee(t,e,n){const i=t.slice();return i[11]=e[n],i}function te(t,e,n){const i=t.slice();return i[14]=e[n],i[16]=n,i}function ne(t,e,n){const i=t.slice();return i[17]=e[n],i[16]=n,i}function le(t,e,n){const i=t.slice();return i[19]=e[n],i[16]=n,i}function ie(t){let e,n,i,o,u=t[19]+"",d,_;return{c(){e=$("rect"),o=$("text"),d=Y(u),l(e,"x",n=t[11].width/8*t[16]),l(e,"y",0),l(e,"width",i=t[11].width/8),l(e,"height",O),l(e,"fill","#eee"),l(e,"stroke","#000"),l(o,"x",_=t[11].width/8*t[16]+t[11].width/16),l(o,"y",O/1.5),l(o,"font-size","12"),l(o,"text-anchor","middle")},m(f,s){L(f,e,s),L(f,o,s),K(o,d)},p(f,s){s&1&&n!==(n=f[11].width/8*f[16])&&l(e,"x",n),s&1&&i!==(i=f[11].width/8)&&l(e,"width",i),s&1&&u!==(u=f[19]+"")&&F(d,u),s&1&&_!==(_=f[11].width/8*f[16]+f[11].width/16)&&l(o,"x",_)},d(f){f&&(V(e),V(o))}}}function oe(t){let e,n,i,o,u=(t[17]??"")+"",d;return{c(){e=$("rect"),o=$("text"),d=Y(u),l(e,"x",0),l(e,"y",O+t[16]*p),l(e,"width",n=t[11].width),l(e,"height",p),l(e,"fill",i=t[17]==null?"#dbfdc9":"#b2f2bb"),l(e,"stroke","#12b886"),l(o,"x",6),l(o,"y",O+t[16]*p+p/1.5),l(o,"font-size","13")},m(_,f){L(_,e,f),L(_,o,f),K(o,d)},p(_,f){f&1&&n!==(n=_[11].width)&&l(e,"width",n),f&1&&i!==(i=_[17]==null?"#dbfdc9":"#b2f2bb")&&l(e,"fill",i),f&1&&u!==(u=(_[17]??"")+"")&&F(d,u)},d(_){_&&(V(e),V(o))}}}function fe(t){let e,n,i,o,u,d=(t[14]??"")+"",_,f;return{c(){e=$("rect"),u=$("text"),_=Y(d),l(e,"x",0),l(e,"y",n=O+t[11].bucket.Keys.length*p+t[16]*p),l(e,"width",i=t[11].width),l(e,"height",p),l(e,"fill",o=t[14]==null?"#fff2b8":"#ffec99"),l(e,"stroke","#ffa94d"),l(u,"x",6),l(u,"y",f=O+t[11].bucket.Keys.length*p+t[16]*p+p/1.5),l(u,"font-size","13")},m(s,g){L(s,e,g),L(s,u,g),K(u,_)},p(s,g){g&1&&n!==(n=O+s[11].bucket.Keys.length*p+s[16]*p)&&l(e,"y",n),g&1&&i!==(i=s[11].width)&&l(e,"width",i),g&1&&o!==(o=s[14]==null?"#fff2b8":"#ffec99")&&l(e,"fill",o),g&1&&d!==(d=(s[14]??"")+"")&&F(_,d),g&1&&f!==(f=O+s[11].bucket.Keys.length*p+s[16]*p+p/1.5)&&l(u,"y",f)},d(s){s&&(V(e),V(u))}}}function re(t){let e,n,i,o,u,d,_,f,s,g,h=t[11].bucket.overflow+"",m,c,b,E=N(t[11].bucket.tophash),w=[];for(let a=0;a<E.length;a+=1)w[a]=ie(le(t,E,a));let A=N(t[11].bucket.Keys),v=[];for(let a=0;a<A.length;a+=1)v[a]=oe(ne(t,A,a));let B=N(t[11].bucket.Values),y=[];for(let a=0;a<B.length;a+=1)y[a]=fe(te(t,B,a));return{c(){e=$("g"),n=$("rect");for(let a=0;a<w.length;a+=1)w[a].c();u=T();for(let a=0;a<v.length;a+=1)v[a].c();d=T();for(let a=0;a<y.length;a+=1)y[a].c();_=$("rect"),g=$("text"),m=Y(h),l(n,"width",i=t[11].width),l(n,"height",o=t[11].height),l(n,"fill","#fff"),l(n,"stroke","#000"),l(n,"stroke-width","2"),l(_,"x",0),l(_,"y",f=O+t[11].bucket.Keys.length*p+t[11].bucket.Values.length*p),l(_,"width",s=t[11].width),l(_,"height",p),l(_,"fill","#ddd"),l(_,"stroke","#000"),l(g,"x",6),l(g,"y",c=O+t[11].bucket.Keys.length*p+t[11].bucket.Values.length*p+p/1.5),l(g,"font-size","12"),l(e,"transform",b=`translate(${t[11].x}, ${t[11].y})`)},m(a,k){L(a,e,k),K(e,n);for(let r=0;r<w.length;r+=1)w[r]&&w[r].m(e,null);K(e,u);for(let r=0;r<v.length;r+=1)v[r]&&v[r].m(e,null);K(e,d);for(let r=0;r<y.length;r+=1)y[r]&&y[r].m(e,null);K(e,_),K(e,g),K(g,m)},p(a,k){if(k&1&&i!==(i=a[11].width)&&l(n,"width",i),k&1&&o!==(o=a[11].height)&&l(n,"height",o),k&1){E=N(a[11].bucket.tophash);let r;for(r=0;r<E.length;r+=1){const S=le(a,E,r);w[r]?w[r].p(S,k):(w[r]=ie(S),w[r].c(),w[r].m(e,u))}for(;r<w.length;r+=1)w[r].d(1);w.length=E.length}if(k&1){A=N(a[11].bucket.Keys);let r;for(r=0;r<A.length;r+=1){const S=ne(a,A,r);v[r]?v[r].p(S,k):(v[r]=oe(S),v[r].c(),v[r].m(e,d))}for(;r<v.length;r+=1)v[r].d(1);v.length=A.length}if(k&1){B=N(a[11].bucket.Values);let r;for(r=0;r<B.length;r+=1){const S=te(a,B,r);y[r]?y[r].p(S,k):(y[r]=fe(S),y[r].c(),y[r].m(e,_))}for(;r<y.length;r+=1)y[r].d(1);y.length=B.length}k&1&&f!==(f=O+a[11].bucket.Keys.length*p+a[11].bucket.Values.length*p)&&l(_,"y",f),k&1&&s!==(s=a[11].width)&&l(_,"width",s),k&1&&h!==(h=a[11].bucket.overflow+"")&&F(m,h),k&1&&c!==(c=O+a[11].bucket.Keys.length*p+a[11].bucket.Values.length*p+p/1.5)&&l(g,"y",c),k&1&&b!==(b=`translate(${a[11].x}, ${a[11].y})`)&&l(e,"transform",b)},d(a){a&&V(e),C(w,a),C(v,a),C(y,a)}}}function ue(t){let e,n,i,o,u;return{c(){e=$("line"),l(e,"x1",n=t[8].x),l(e,"y1",i=t[8].y1),l(e,"x2",o=t[8].x),l(e,"y2",u=t[8].y2),l(e,"stroke","#000"),l(e,"stroke-width","2"),l(e,"marker-end","url(#arrow)")},m(d,_){L(d,e,_)},p(d,_){_&2&&n!==(n=d[8].x)&&l(e,"x1",n),_&2&&i!==(i=d[8].y1)&&l(e,"y1",i),_&2&&o!==(o=d[8].x)&&l(e,"x2",o),_&2&&u!==(u=d[8].y2)&&l(e,"y2",u)},d(d){d&&V(e)}}}function Be(t){let e,n,i,o,u,d,_=N(t[0]),f=[];for(let h=0;h<_.length;h+=1)f[h]=re(ee(t,_,h));let s=N(t[1]),g=[];for(let h=0;h<s.length;h+=1)g[h]=ue(x(t,s,h));return{c(){e=$("svg"),n=$("defs"),i=$("marker"),o=$("path");for(let h=0;h<f.length;h+=1)f[h].c();u=T();for(let h=0;h<g.length;h+=1)g[h].c();l(o,"d","M0,0 L6,3 L0,6 Z"),l(o,"fill","#000"),l(i,"id","arrow"),l(i,"markerWidth","6"),l(i,"markerHeight","6"),l(i,"refX","3"),l(i,"refY","3"),l(i,"orient","auto"),l(e,"width","100%"),l(e,"height","100%"),l(e,"viewBox",d=`0 0 ${t[2]} ${t[3]}`),l(e,"class","svelte-ik8ch3")},m(h,m){L(h,e,m),K(e,n),K(n,i),K(i,o);for(let c=0;c<f.length;c+=1)f[c]&&f[c].m(e,null);K(e,u);for(let c=0;c<g.length;c+=1)g[c]&&g[c].m(e,null)},p(h,[m]){if(m&1){_=N(h[0]);let c;for(c=0;c<_.length;c+=1){const b=ee(h,_,c);f[c]?f[c].p(b,m):(f[c]=re(b),f[c].c(),f[c].m(e,u))}for(;c<f.length;c+=1)f[c].d(1);f.length=_.length}if(m&2){s=N(h[1]);let c;for(c=0;c<s.length;c+=1){const b=x(h,s,c);g[c]?g[c].p(b,m):(g[c]=ue(b),g[c].c(),g[c].m(e,null))}for(;c<g.length;c+=1)g[c].d(1);g.length=s.length}m&12&&d!==(d=`0 0 ${h[2]} ${h[3]}`)&&l(e,"viewBox",d)},i:I,o:I,d(h){h&&V(e),C(f,h),C(g,h)}}}const G=260,O=24,p=22,se=60,R=40,ze=4;function Pe(t,e,n){let i=[],o=[],u=[],d=[],_=2e3,f=2e3;async function s(){i=await(await fetch("/vizual")).json(),o=[];let m=[];for(const c of i)c.type==="main"?(m.length&&o.push(m),m=[c]):m.push(c);m.length&&o.push(m),g()}function g(){n(0,u=[]),n(1,d=[]);let h=se,m=0;for(const c of o){let b=R;for(let E=0;E<c.length;E++){const w=c[E],A=O+w.Keys.length*p+w.Values.length*p+p;if(u.push({id:w.id,x:h,y:b,width:G,height:A,bucket:w}),E<c.length-1){const v=b+A+R;d.push({x:h+G/2,y1:b+A,y2:v-ze}),b=v}else b+=A+R;b>m&&(m=b)}h+=G+se}n(2,_=h+200),n(3,f=m+200)}return we(s),[u,d,_,f]}class je extends Le{constructor(e){super(),Ve(this,e,Pe,Be,ge,{})}}new je({target:document.getElementById("app")});
