var me=Object.defineProperty;var be=(e,t,n)=>t in e?me(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var G=(e,t,n)=>(be(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))i(f);new MutationObserver(f=>{for(const s of f)if(s.type==="childList")for(const g of s.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&i(g)}).observe(document,{childList:!0,subtree:!0});function n(f){const s={};return f.integrity&&(s.integrity=f.integrity),f.referrerPolicy&&(s.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?s.credentials="include":f.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(f){if(f.ep)return;f.ep=!0;const s=n(f);fetch(f.href,s)}})();function W(){}function _e(e){return e()}function x(){return Object.create(null)}function X(e){e.forEach(_e)}function ge(e){return typeof e=="function"}function ve(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function ye(e){return Object.keys(e).length===0}function K(e,t){e.appendChild(t)}function P(e,t,n){e.insertBefore(t,n||null)}function S(e){e.parentNode&&e.parentNode.removeChild(e)}function I(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function ke(e){return document.createElement(e)}function E(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function F(e){return document.createTextNode(e)}function D(){return F("")}function l(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function we(e){return Array.from(e.childNodes)}function q(e,t){t=""+t,e.data!==t&&(e.data=t)}function T(e,t,n,i){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,i?"important":"")}let Y;function M(e){Y=e}function $e(){if(!Y)throw new Error("Function called outside component initialization");return Y}function Ee(e){$e().$$.on_mount.push(e)}const B=[],ee=[];let C=[];const te=[],Ke=Promise.resolve();let J=!1;function Oe(){J||(J=!0,Ke.then(pe))}function Q(e){C.push(e)}const U=new Set;let H=0;function pe(){if(H!==0)return;const e=Y;do{try{for(;H<B.length;){const t=B[H];H++,M(t),je(t.$$)}}catch(t){throw B.length=0,H=0,t}for(M(null),B.length=0,H=0;ee.length;)ee.pop()();for(let t=0;t<C.length;t+=1){const n=C[t];U.has(n)||(U.add(n),n())}C.length=0}while(B.length);for(;te.length;)te.pop()();J=!1,U.clear(),M(e)}function je(e){if(e.fragment!==null){e.update(),X(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Q)}}function Ae(e){const t=[],n=[];C.forEach(i=>e.indexOf(i)===-1?t.push(i):n.push(i)),n.forEach(i=>i()),C=t}const Ne=new Set;function Se(e,t){e&&e.i&&(Ne.delete(e),e.i(t))}function N(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Ve(e,t,n){const{fragment:i,after_update:f}=e.$$;i&&i.m(t,n),Q(()=>{const s=e.$$.on_mount.map(_e).filter(ge);e.$$.on_destroy?e.$$.on_destroy.push(...s):X(s),e.$$.on_mount=[]}),f.forEach(Q)}function Le(e,t){const n=e.$$;n.fragment!==null&&(Ae(n.after_update),X(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Pe(e,t){e.$$.dirty[0]===-1&&(B.push(e),Oe(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ze(e,t,n,i,f,s,g=null,d=[-1]){const _=Y;M(e);const u=e.$$={fragment:null,ctx:[],props:s,update:W,not_equal:f,bound:x(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(_?_.$$.context:[])),callbacks:x(),dirty:d,skip_bound:!1,root:t.target||_.$$.root};g&&g(u.root);let r=!1;if(u.ctx=n?n(e,t.props||{},(o,m,...h)=>{const b=h.length?h[0]:m;return u.ctx&&f(u.ctx[o],u.ctx[o]=b)&&(!u.skip_bound&&u.bound[o]&&u.bound[o](b),r&&Pe(e,o)),m}):[],u.update(),r=!0,X(u.before_update),u.fragment=i?i(u.ctx):!1,t.target){if(t.hydrate){const o=we(t.target);u.fragment&&u.fragment.l(o),o.forEach(S)}else u.fragment&&u.fragment.c();t.intro&&Se(e.$$.fragment),Ve(e,t.target,t.anchor),pe()}M(_)}class He{constructor(){G(this,"$$");G(this,"$$set")}$destroy(){Le(this,1),this.$destroy=W}$on(t,n){if(!ge(n))return W;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(n),()=>{const f=i.indexOf(n);f!==-1&&i.splice(f,1)}}$set(t){this.$$set&&!ye(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Be="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Be);function ne(e,t,n){const i=e.slice();return i[8]=t[n],i}function le(e,t,n){const i=e.slice();return i[11]=t[n],i}function ie(e,t,n){const i=e.slice();return i[14]=t[n],i[16]=n,i}function oe(e,t,n){const i=e.slice();return i[17]=t[n],i[16]=n,i}function fe(e,t,n){const i=e.slice();return i[19]=t[n],i[16]=n,i}function re(e){let t,n,i,f,s=e[19]+"",g,d,_;return{c(){t=E("rect"),f=E("text"),g=F(s),l(t,"x",n=e[11].padding+O/8*e[16]),l(t,"y",i=e[11].padding),l(t,"width",O/8),l(t,"height",w),l(t,"fill","#eee"),l(t,"stroke","#000"),l(f,"x",d=e[11].padding+O/8*e[16]+O/16),l(f,"y",_=e[11].padding+w/1.5),l(f,"font-size","12"),l(f,"text-anchor","middle")},m(u,r){P(u,t,r),P(u,f,r),K(f,g)},p(u,r){r&1&&n!==(n=u[11].padding+O/8*u[16])&&l(t,"x",n),r&1&&i!==(i=u[11].padding)&&l(t,"y",i),r&1&&s!==(s=u[19]+"")&&q(g,s),r&1&&d!==(d=u[11].padding+O/8*u[16]+O/16)&&l(f,"x",d),r&1&&_!==(_=u[11].padding+w/1.5)&&l(f,"y",_)},d(u){u&&(S(t),S(f))}}}function se(e){let t,n,i,f,s,g=(e[17]??"")+"",d,_,u;return{c(){t=E("rect"),s=E("text"),d=F(g),l(t,"x",n=e[11].padding),l(t,"y",i=e[11].padding+w+e[16]*p),l(t,"width",O),l(t,"height",p),l(t,"fill",f=e[17]==null?"#dbfdc9":"#b2f2bb"),l(t,"stroke","#12b886"),l(t,"class","cell-key svelte-1ta6jop"),l(s,"x",_=e[11].padding+6),l(s,"y",u=e[11].padding+w+e[16]*p+p/1.5),l(s,"font-size","13")},m(r,o){P(r,t,o),P(r,s,o),K(s,d)},p(r,o){o&1&&n!==(n=r[11].padding)&&l(t,"x",n),o&1&&i!==(i=r[11].padding+w+r[16]*p)&&l(t,"y",i),o&1&&f!==(f=r[17]==null?"#dbfdc9":"#b2f2bb")&&l(t,"fill",f),o&1&&g!==(g=(r[17]??"")+"")&&q(d,g),o&1&&_!==(_=r[11].padding+6)&&l(s,"x",_),o&1&&u!==(u=r[11].padding+w+r[16]*p+p/1.5)&&l(s,"y",u)},d(r){r&&(S(t),S(s))}}}function ue(e){let t,n,i,f,s,g=(e[14]??"")+"",d,_,u;return{c(){t=E("rect"),s=E("text"),d=F(g),l(t,"x",n=e[11].padding),l(t,"y",i=e[11].padding+w+e[11].bucket.Keys.length*p+e[16]*p),l(t,"width",O),l(t,"height",p),l(t,"fill",f=e[14]==null?"#fff2b8":"#ffec99"),l(t,"stroke","#ffa94d"),l(t,"class","cell-value svelte-1ta6jop"),l(s,"x",_=e[11].padding+6),l(s,"y",u=e[11].padding+w+e[11].bucket.Keys.length*p+e[16]*p+p/1.5),l(s,"font-size","13")},m(r,o){P(r,t,o),P(r,s,o),K(s,d)},p(r,o){o&1&&n!==(n=r[11].padding)&&l(t,"x",n),o&1&&i!==(i=r[11].padding+w+r[11].bucket.Keys.length*p+r[16]*p)&&l(t,"y",i),o&1&&f!==(f=r[14]==null?"#fff2b8":"#ffec99")&&l(t,"fill",f),o&1&&g!==(g=(r[14]??"")+"")&&q(d,g),o&1&&_!==(_=r[11].padding+6)&&l(s,"x",_),o&1&&u!==(u=r[11].padding+w+r[11].bucket.Keys.length*p+r[16]*p+p/1.5)&&l(s,"y",u)},d(r){r&&(S(t),S(s))}}}function ce(e){let t,n,i,f,s,g,d,_,u,r,o=e[11].bucket.overflow+"",m,h,b,V,j=N(e[11].bucket.tophash),y=[];for(let c=0;c<j.length;c+=1)y[c]=re(fe(e,j,c));let A=N(e[11].bucket.Keys),v=[];for(let c=0;c<A.length;c+=1)v[c]=se(oe(e,A,c));let L=N(e[11].bucket.Values),$=[];for(let c=0;c<L.length;c+=1)$[c]=ue(ie(e,L,c));return{c(){t=E("g"),n=E("rect");for(let c=0;c<y.length;c+=1)y[c].c();s=D();for(let c=0;c<v.length;c+=1)v[c].c();g=D();for(let c=0;c<$.length;c+=1)$[c].c();d=E("rect"),r=E("text"),m=F(o),l(n,"class","bucket-rect svelte-1ta6jop"),l(n,"x",0),l(n,"y",0),l(n,"width",i=e[11].width),l(n,"height",f=e[11].height),l(n,"fill","#fff"),l(n,"stroke","#000"),l(n,"stroke-width",Me),l(n,"rx",de),l(n,"ry",de),l(d,"x",_=e[11].padding),l(d,"y",u=e[11].padding+w+e[11].bucket.Keys.length*p+e[11].bucket.Values.length*p),l(d,"width",O),l(d,"height",p),l(d,"fill","#ddd"),l(d,"stroke","#000"),l(r,"x",h=e[11].padding+6),l(r,"y",b=e[11].padding+w+e[11].bucket.Keys.length*p+e[11].bucket.Values.length*p+p/1.5),l(r,"font-size","12"),l(t,"transform",V=`translate(${e[11].x}, ${e[11].y})`),l(t,"class","bucket-group svelte-1ta6jop")},m(c,k){P(c,t,k),K(t,n);for(let a=0;a<y.length;a+=1)y[a]&&y[a].m(t,null);K(t,s);for(let a=0;a<v.length;a+=1)v[a]&&v[a].m(t,null);K(t,g);for(let a=0;a<$.length;a+=1)$[a]&&$[a].m(t,null);K(t,d),K(t,r),K(r,m)},p(c,k){if(k&1&&i!==(i=c[11].width)&&l(n,"width",i),k&1&&f!==(f=c[11].height)&&l(n,"height",f),k&1){j=N(c[11].bucket.tophash);let a;for(a=0;a<j.length;a+=1){const z=fe(c,j,a);y[a]?y[a].p(z,k):(y[a]=re(z),y[a].c(),y[a].m(t,s))}for(;a<y.length;a+=1)y[a].d(1);y.length=j.length}if(k&1){A=N(c[11].bucket.Keys);let a;for(a=0;a<A.length;a+=1){const z=oe(c,A,a);v[a]?v[a].p(z,k):(v[a]=se(z),v[a].c(),v[a].m(t,g))}for(;a<v.length;a+=1)v[a].d(1);v.length=A.length}if(k&1){L=N(c[11].bucket.Values);let a;for(a=0;a<L.length;a+=1){const z=ie(c,L,a);$[a]?$[a].p(z,k):($[a]=ue(z),$[a].c(),$[a].m(t,d))}for(;a<$.length;a+=1)$[a].d(1);$.length=L.length}k&1&&_!==(_=c[11].padding)&&l(d,"x",_),k&1&&u!==(u=c[11].padding+w+c[11].bucket.Keys.length*p+c[11].bucket.Values.length*p)&&l(d,"y",u),k&1&&o!==(o=c[11].bucket.overflow+"")&&q(m,o),k&1&&h!==(h=c[11].padding+6)&&l(r,"x",h),k&1&&b!==(b=c[11].padding+w+c[11].bucket.Keys.length*p+c[11].bucket.Values.length*p+p/1.5)&&l(r,"y",b),k&1&&V!==(V=`translate(${c[11].x}, ${c[11].y})`)&&l(t,"transform",V)},d(c){c&&S(t),I(y,c),I(v,c),I($,c)}}}function ae(e){let t,n,i,f,s;return{c(){t=E("line"),l(t,"x1",n=e[8].x),l(t,"y1",i=e[8].y1),l(t,"x2",f=e[8].x),l(t,"y2",s=e[8].y2),l(t,"stroke","#000"),l(t,"stroke-width","2"),l(t,"marker-end","url(#arrow)")},m(g,d){P(g,t,d)},p(g,d){d&2&&n!==(n=g[8].x)&&l(t,"x1",n),d&2&&i!==(i=g[8].y1)&&l(t,"y1",i),d&2&&f!==(f=g[8].x)&&l(t,"x2",f),d&2&&s!==(s=g[8].y2)&&l(t,"y2",s)},d(g){g&&S(t)}}}function Ce(e){let t,n,i,f,s,g,d=N(e[0]),_=[];for(let o=0;o<d.length;o+=1)_[o]=ce(le(e,d,o));let u=N(e[1]),r=[];for(let o=0;o<u.length;o+=1)r[o]=ae(ne(e,u,o));return{c(){t=ke("div"),n=E("svg"),i=E("defs"),f=E("marker"),s=E("path");for(let o=0;o<_.length;o+=1)_[o].c();g=D();for(let o=0;o<r.length;o+=1)r[o].c();l(s,"d","M0,0 L6,3 L0,6 Z"),l(s,"fill","#000"),l(f,"id","arrow"),l(f,"markerWidth","6"),l(f,"markerHeight","6"),l(f,"refX","3"),l(f,"refY","3"),l(f,"orient","auto"),l(n,"width",e[2]),l(n,"height",e[3]),l(n,"class","svelte-1ta6jop"),T(t,"width","100vw"),T(t,"height","100vh"),T(t,"overflow","auto")},m(o,m){P(o,t,m),K(t,n),K(n,i),K(i,f),K(f,s);for(let h=0;h<_.length;h+=1)_[h]&&_[h].m(n,null);K(n,g);for(let h=0;h<r.length;h+=1)r[h]&&r[h].m(n,null)},p(o,[m]){if(m&1){d=N(o[0]);let h;for(h=0;h<d.length;h+=1){const b=le(o,d,h);_[h]?_[h].p(b,m):(_[h]=ce(b),_[h].c(),_[h].m(n,g))}for(;h<_.length;h+=1)_[h].d(1);_.length=d.length}if(m&2){u=N(o[1]);let h;for(h=0;h<u.length;h+=1){const b=ne(o,u,h);r[h]?r[h].p(b,m):(r[h]=ae(b),r[h].c(),r[h].m(n,null))}for(;h<r.length;h+=1)r[h].d(1);r.length=u.length}m&4&&l(n,"width",o[2]),m&8&&l(n,"height",o[3])},i:W,o:W,d(o){o&&S(t),I(_,o),I(r,o)}}}const O=260,w=24,p=22,he=60,Z=40,Ie=4,de=12,R=10,Me=1.5;function We(e,t,n){let i=[],f=[],s=[],g=[],d=2e3,_=2e3;async function u(){i=await(await fetch("/vizual")).json(),f=[];let m=[];for(const h of i)h.type==="main"?(m.length&&f.push(m),m=[h]):m.push(h);m.length&&f.push(m),r()}function r(){n(0,s=[]),n(1,g=[]);let o=he,m=0;for(const h of f){let b=Z;for(let V=0;V<h.length;V++){const j=h[V],A=w+j.Keys.length*p+j.Values.length*p+p+R*2,v=O+R*2;if(s.push({id:j.id,x:o,y:b,width:v,height:A,bucket:j,padding:R}),V<h.length-1){const L=b+A+Z;g.push({x:o+v/2,y1:b+A,y2:L-Ie}),b=L}else b+=A+Z;b>m&&(m=b)}o+=O+he+R*2}n(2,d=o+200),n(3,_=m+200)}return Ee(u),[s,g,d,_]}class Ye extends He{constructor(t){super(),ze(this,t,We,Ce,ve,{})}}new Ye({target:document.getElementById("app")});
