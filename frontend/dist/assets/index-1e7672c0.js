var ot=Object.defineProperty;var ft=(t,e,l)=>e in t?ot(t,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[e]=l;var Ae=(t,e,l)=>(ft(t,typeof e!="symbol"?e+"":e,l),l);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const f of s)if(f.type==="childList")for(const o of f.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function l(s){const f={};return s.integrity&&(f.integrity=s.integrity),s.referrerPolicy&&(f.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?f.credentials="include":s.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function n(s){if(s.ep)return;s.ep=!0;const f=l(s);fetch(s.href,f)}})();function we(){}function lt(t){return t()}function Se(){return Object.create(null)}function ve(t){t.forEach(lt)}function nt(t){return typeof t=="function"}function rt(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function ut(t){return Object.keys(t).length===0}function Ee(t){return t??""}function v(t,e){t.appendChild(e)}function z(t,e,l){t.insertBefore(e,l||null)}function P(t){t.parentNode&&t.parentNode.removeChild(t)}function pe(t,e){for(let l=0;l<t.length;l+=1)t[l]&&t[l].d(e)}function T(t){return document.createElement(t)}function U(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function G(t){return document.createTextNode(t)}function ee(){return G(" ")}function re(){return G("")}function he(t,e,l,n){return t.addEventListener(e,l,n),()=>t.removeEventListener(e,l,n)}function i(t,e,l){l==null?t.removeAttribute(e):t.getAttribute(e)!==l&&t.setAttribute(e,l)}function at(t){return Array.from(t.childNodes)}function le(t,e){e=""+e,t.data!==e&&(t.data=e)}function be(t,e,l,n){l==null?t.style.removeProperty(e):t.style.setProperty(e,l,n?"important":"")}let ye;function ke(t){ye=t}function ct(){if(!ye)throw new Error("Function called outside component initialization");return ye}function ht(t){ct().$$.on_mount.push(t)}const ge=[],Le=[];let me=[];const We=[],dt=Promise.resolve();let Me=!1;function _t(){Me||(Me=!0,dt.then(it))}function Be(t){me.push(t)}const Oe=new Set;let de=0;function it(){if(de!==0)return;const t=ye;do{try{for(;de<ge.length;){const e=ge[de];de++,ke(e),gt(e.$$)}}catch(e){throw ge.length=0,de=0,e}for(ke(null),ge.length=0,de=0;Le.length;)Le.pop()();for(let e=0;e<me.length;e+=1){const l=me[e];Oe.has(l)||(Oe.add(l),l())}me.length=0}while(ge.length);for(;We.length;)We.pop()();Me=!1,Oe.clear(),ke(t)}function gt(t){if(t.fragment!==null){t.update(),ve(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Be)}}function pt(t){const e=[],l=[];me.forEach(n=>t.indexOf(n)===-1?e.push(n):l.push(n)),l.forEach(n=>n()),me=e}const mt=new Set;function st(t,e){t&&t.i&&(mt.delete(t),t.i(e))}function te(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function wt(t,e){t.d(1),e.delete(t.key)}function vt(t,e,l,n,s,f,o,a,c,r,m,d){let k=t.length,O=f.length,h=k;const B={};for(;h--;)B[t[h].key]=h;const X=[],S=new Map,K=new Map,x=[];for(h=O;h--;){const N=d(s,f,h),F=l(N);let _=o.get(F);_?n&&x.push(()=>_.p(N,e)):(_=r(F,N),_.c()),S.set(F,X[h]=_),F in B&&K.set(F,Math.abs(h-B[F]))}const j=new Set,Z=new Set;function R(N){st(N,1),N.m(a,m),o.set(N.key,N),m=N.first,O--}for(;k&&O;){const N=X[O-1],F=t[k-1],_=N.key,I=F.key;N===F?(m=N.first,k--,O--):S.has(I)?!o.has(_)||j.has(_)?R(N):Z.has(I)?k--:K.get(_)>K.get(I)?(Z.add(_),R(N)):(j.add(I),k--):(c(F,o),k--)}for(;k--;){const N=t[k];S.has(N.key)||c(N,o)}for(;O;)R(X[O-1]);return ve(x),X}function kt(t,e,l){const{fragment:n,after_update:s}=t.$$;n&&n.m(e,l),Be(()=>{const f=t.$$.on_mount.map(lt).filter(nt);t.$$.on_destroy?t.$$.on_destroy.push(...f):ve(f),t.$$.on_mount=[]}),s.forEach(Be)}function yt(t,e){const l=t.$$;l.fragment!==null&&(pt(l.after_update),ve(l.on_destroy),l.fragment&&l.fragment.d(e),l.on_destroy=l.fragment=null,l.ctx=[])}function bt(t,e){t.$$.dirty[0]===-1&&(ge.push(t),_t(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function At(t,e,l,n,s,f,o=null,a=[-1]){const c=ye;ke(t);const r=t.$$={fragment:null,ctx:[],props:f,update:we,not_equal:s,bound:Se(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:Se(),dirty:a,skip_bound:!1,root:e.target||c.$$.root};o&&o(r.root);let m=!1;if(r.ctx=l?l(t,e.props||{},(d,k,...O)=>{const h=O.length?O[0]:k;return r.ctx&&s(r.ctx[d],r.ctx[d]=h)&&(!r.skip_bound&&r.bound[d]&&r.bound[d](h),m&&bt(t,d)),k}):[],r.update(),m=!0,ve(r.before_update),r.fragment=n?n(r.ctx):!1,e.target){if(e.hydrate){const d=at(e.target);r.fragment&&r.fragment.l(d),d.forEach(P)}else r.fragment&&r.fragment.c();e.intro&&st(t.$$.fragment),kt(t,e.target,e.anchor),it()}ke(c)}class Ot{constructor(){Ae(this,"$$");Ae(this,"$$set")}$destroy(){yt(this,1),this.$destroy=we}$on(e,l){if(!nt(l))return we;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(l),()=>{const s=n.indexOf(l);s!==-1&&n.splice(s,1)}}$set(e){this.$$set&&!ut(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Ct="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ct);function Ne(t,e,l){const n=t.slice();return n[28]=e[l][0],n[29]=e[l][1],n}function Pe(t,e,l){const n=t.slice();return n[32]=e[l],n}function xe(t,e,l){const n=t.slice();return n[35]=e[l],n}function Ce(t){const e=t.slice(),l=(e[35].bucket.keys||[]).length;e[38]=l;const n=(e[35].bucket.values||[]).length;return e[39]=n,e}function Ie(t,e,l){var f;const n=t.slice();n[29]=e[l],n[41]=l;const s=(((f=n[35].bucket)==null?void 0:f.keys)||[]).length;return n[38]=s,n}function Ye(t,e,l){const n=t.slice();return n[28]=e[l],n[41]=l,n}function ze(t,e,l){const n=t.slice();return n[43]=e[l],n[41]=l,n}function Xe(t,e,l){const n=t.slice();return n[45]=e[l],n}function De(t){let e,l=t[45].text+"",n,s,f,o;return{c(){e=U("text"),n=G(l),i(e,"x",s=t[45].x),i(e,"y",f=t[45].y),i(e,"class",o=Ee(t[45].isOld?"label-old":"label-new")+" svelte-x4wxi1"),i(e,"font-size","14"),i(e,"font-weight","bold"),i(e,"font-family","Arial, sans-serif")},m(a,c){z(a,e,c),v(e,n)},p(a,c){c[0]&16&&l!==(l=a[45].text+"")&&le(n,l),c[0]&16&&s!==(s=a[45].x)&&i(e,"x",s),c[0]&16&&f!==(f=a[45].y)&&i(e,"y",f),c[0]&16&&o!==(o=Ee(a[45].isOld?"label-old":"label-new")+" svelte-x4wxi1")&&i(e,"class",o)},d(a){a&&P(e)}}}function je(t){var Z,R,N,F;let e,l,n,s,f,o,a,c,r,m,d,k,O=((Z=t[35].bucket)==null?void 0:Z.type)==="main"&&Re(t),h=te(((R=t[35].bucket)==null?void 0:R.tophash)||[]),B=[];for(let _=0;_<h.length;_+=1)B[_]=Fe(ze(t,h,_));let X=te(((N=t[35].bucket)==null?void 0:N.keys)||[]),S=[];for(let _=0;_<X.length;_+=1)S[_]=He(Ye(t,X,_));let K=te(((F=t[35].bucket)==null?void 0:F.values)||[]),x=[];for(let _=0;_<K.length;_+=1)x[_]=Te(Ie(t,K,_));let j=t[35].bucket&&Ke(Ce(t));return{c(){e=U("g"),l=U("rect"),O&&O.c(),c=re();for(let _=0;_<B.length;_+=1)B[_].c();r=re();for(let _=0;_<S.length;_+=1)S[_].c();m=re();for(let _=0;_<x.length;_+=1)x[_].c();d=re(),j&&j.c(),i(l,"class",n="bucket-rect "+(t[35].isOld?"bucket-old":"")+" svelte-x4wxi1"),i(l,"width",s=t[35].width),i(l,"height",f=t[35].height),i(l,"fill","#fff"),i(l,"stroke",o=t[35].isOld?"#ff6b6b":"#000"),i(l,"stroke-width",a=t[35].isOld?2:tt),i(l,"rx",et),i(l,"ry",et),i(l,"filter","url(#bucket-shadow)"),i(e,"transform",k=`translate(${t[35].x}, ${t[35].y})`),i(e,"class","bucket-group svelte-x4wxi1")},m(_,I){z(_,e,I),v(e,l),O&&O.m(e,null),v(e,c);for(let H=0;H<B.length;H+=1)B[H]&&B[H].m(e,null);v(e,r);for(let H=0;H<S.length;H+=1)S[H]&&S[H].m(e,null);v(e,m);for(let H=0;H<x.length;H+=1)x[H]&&x[H].m(e,null);v(e,d),j&&j.m(e,null)},p(_,I){var H,Q,w,M;if(I[0]&4&&n!==(n="bucket-rect "+(_[35].isOld?"bucket-old":"")+" svelte-x4wxi1")&&i(l,"class",n),I[0]&4&&s!==(s=_[35].width)&&i(l,"width",s),I[0]&4&&f!==(f=_[35].height)&&i(l,"height",f),I[0]&4&&o!==(o=_[35].isOld?"#ff6b6b":"#000")&&i(l,"stroke",o),I[0]&4&&a!==(a=_[35].isOld?2:tt)&&i(l,"stroke-width",a),((H=_[35].bucket)==null?void 0:H.type)==="main"?O?O.p(_,I):(O=Re(_),O.c(),O.m(e,c)):O&&(O.d(1),O=null),I[0]&4){h=te(((Q=_[35].bucket)==null?void 0:Q.tophash)||[]);let p;for(p=0;p<h.length;p+=1){const y=ze(_,h,p);B[p]?B[p].p(y,I):(B[p]=Fe(y),B[p].c(),B[p].m(e,r))}for(;p<B.length;p+=1)B[p].d(1);B.length=h.length}if(I[0]&4){X=te(((w=_[35].bucket)==null?void 0:w.keys)||[]);let p;for(p=0;p<X.length;p+=1){const y=Ye(_,X,p);S[p]?S[p].p(y,I):(S[p]=He(y),S[p].c(),S[p].m(e,m))}for(;p<S.length;p+=1)S[p].d(1);S.length=X.length}if(I[0]&4){K=te(((M=_[35].bucket)==null?void 0:M.values)||[]);let p;for(p=0;p<K.length;p+=1){const y=Ie(_,K,p);x[p]?x[p].p(y,I):(x[p]=Te(y),x[p].c(),x[p].m(e,d))}for(;p<x.length;p+=1)x[p].d(1);x.length=K.length}_[35].bucket?j?j.p(Ce(_),I):(j=Ke(Ce(_)),j.c(),j.m(e,null)):j&&(j.d(1),j=null),I[0]&4&&k!==(k=`translate(${_[35].x}, ${_[35].y})`)&&i(e,"transform",k)},d(_){_&&P(e),O&&O.d(),pe(B,_),pe(S,_),pe(x,_),j&&j.d()}}}function Re(t){let e,l,n=t[35].bucket.displayBid+"",s,f,o;return{c(){e=U("text"),l=G("bid "),s=G(n),i(e,"x",f=t[35].padding),i(e,"y",o=t[35].padding+12),i(e,"font-size","11"),i(e,"font-weight","bold"),i(e,"fill","#495057")},m(a,c){z(a,e,c),v(e,l),v(e,s)},p(a,c){c[0]&4&&n!==(n=a[35].bucket.displayBid+"")&&le(s,n),c[0]&4&&f!==(f=a[35].padding)&&i(e,"x",f),c[0]&4&&o!==(o=a[35].padding+12)&&i(e,"y",o)},d(a){a&&P(e)}}}function Fe(t){let e,l,n,s,f=t[43]+"",o,a,c;return{c(){e=U("rect"),s=U("text"),o=G(f),i(e,"x",l=t[35].padding+t[41]*ue),i(e,"y",n=t[35].padding+V),i(e,"width",ue),i(e,"height",J),i(e,"fill","#eee"),i(e,"stroke","#000"),i(s,"x",a=t[35].padding+t[41]*ue+ue/2),i(s,"y",c=t[35].padding+V+J/1.5),i(s,"font-size","12"),i(s,"text-anchor","middle")},m(r,m){z(r,e,m),z(r,s,m),v(s,o)},p(r,m){m[0]&4&&l!==(l=r[35].padding+r[41]*ue)&&i(e,"x",l),m[0]&4&&n!==(n=r[35].padding+V)&&i(e,"y",n),m[0]&4&&f!==(f=r[43]+"")&&le(o,f),m[0]&4&&a!==(a=r[35].padding+r[41]*ue+ue/2)&&i(s,"x",a),m[0]&4&&c!==(c=r[35].padding+V+J/1.5)&&i(s,"y",c)},d(r){r&&(P(e),P(s))}}}function He(t){let e,l,n,s,f,o,a=(t[28]??"")+"",c,r,m;return{c(){e=U("rect"),o=U("text"),c=G(a),i(e,"x",l=t[35].padding),i(e,"y",n=t[35].padding+V+J+t[41]*E),i(e,"width",s=t[35].width-se*2),i(e,"height",E),i(e,"fill",f=t[28]==null?"#dbfdc9":"#b2f2bb"),i(e,"stroke","#12b886"),i(e,"class","cell-key svelte-x4wxi1"),i(o,"x",r=t[35].padding+6),i(o,"y",m=t[35].padding+V+J+t[41]*E+E/1.5),i(o,"font-size","13")},m(d,k){z(d,e,k),z(d,o,k),v(o,c)},p(d,k){k[0]&4&&l!==(l=d[35].padding)&&i(e,"x",l),k[0]&4&&n!==(n=d[35].padding+V+J+d[41]*E)&&i(e,"y",n),k[0]&4&&s!==(s=d[35].width-se*2)&&i(e,"width",s),k[0]&4&&f!==(f=d[28]==null?"#dbfdc9":"#b2f2bb")&&i(e,"fill",f),k[0]&4&&a!==(a=(d[28]??"")+"")&&le(c,a),k[0]&4&&r!==(r=d[35].padding+6)&&i(o,"x",r),k[0]&4&&m!==(m=d[35].padding+V+J+d[41]*E+E/1.5)&&i(o,"y",m)},d(d){d&&(P(e),P(o))}}}function Te(t){let e,l,n,s,f,o,a=(t[29]??"")+"",c,r,m;return{c(){e=U("rect"),o=U("text"),c=G(a),i(e,"x",l=t[35].padding),i(e,"y",n=t[35].padding+V+J+t[38]*E+t[41]*E),i(e,"width",s=t[35].width-se*2),i(e,"height",E),i(e,"fill",f=t[29]==null?"#fff2b8":"#ffec99"),i(e,"stroke","#ffa94d"),i(e,"class","cell-value svelte-x4wxi1"),i(o,"x",r=t[35].padding+6),i(o,"y",m=t[35].padding+V+J+t[38]*E+t[41]*E+E/1.5),i(o,"font-size","13")},m(d,k){z(d,e,k),z(d,o,k),v(o,c)},p(d,k){k[0]&4&&l!==(l=d[35].padding)&&i(e,"x",l),k[0]&4&&n!==(n=d[35].padding+V+J+d[38]*E+d[41]*E)&&i(e,"y",n),k[0]&4&&s!==(s=d[35].width-se*2)&&i(e,"width",s),k[0]&4&&f!==(f=d[29]==null?"#fff2b8":"#ffec99")&&i(e,"fill",f),k[0]&4&&a!==(a=(d[29]??"")+"")&&le(c,a),k[0]&4&&r!==(r=d[35].padding+6)&&i(o,"x",r),k[0]&4&&m!==(m=d[35].padding+V+J+d[38]*E+d[41]*E+E/1.5)&&i(o,"y",m)},d(d){d&&(P(e),P(o))}}}function Ke(t){let e,l,n,s,f,o=(t[35].bucket.overflow||"")+"",a,c,r;return{c(){e=U("rect"),f=U("text"),a=G(o),i(e,"x",l=t[35].padding),i(e,"y",n=t[35].padding+V+J+t[38]*E+t[39]*E),i(e,"width",s=t[35].width-se*2),i(e,"height",E),i(e,"fill","#ddd"),i(e,"stroke","#000"),i(f,"x",c=t[35].padding+6),i(f,"y",r=t[35].padding+V+J+t[38]*E+t[39]*E+E/1.5),i(f,"font-size","12")},m(m,d){z(m,e,d),z(m,f,d),v(f,a)},p(m,d){d[0]&4&&l!==(l=m[35].padding)&&i(e,"x",l),d[0]&4&&n!==(n=m[35].padding+V+J+m[38]*E+m[39]*E)&&i(e,"y",n),d[0]&4&&s!==(s=m[35].width-se*2)&&i(e,"width",s),d[0]&4&&o!==(o=(m[35].bucket.overflow||"")+"")&&le(a,o),d[0]&4&&c!==(c=m[35].padding+6)&&i(f,"x",c),d[0]&4&&r!==(r=m[35].padding+V+J+m[38]*E+m[39]*E+E/1.5)&&i(f,"y",r)},d(m){m&&(P(e),P(f))}}}function Ue(t,e){let l,n,s=e[35].x+e[35].width>e[5].x&&e[35].x<e[5].x+e[5].w&&e[35].y+e[35].height>e[5].y&&e[35].y<e[5].y+e[5].h&&je(e);return{key:t,first:null,c(){l=re(),s&&s.c(),n=re(),this.first=l},m(f,o){z(f,l,o),s&&s.m(f,o),z(f,n,o)},p(f,o){e=f,e[35].x+e[35].width>e[5].x&&e[35].x<e[5].x+e[5].w&&e[35].y+e[35].height>e[5].y&&e[35].y<e[5].y+e[5].h?s?s.p(e,o):(s=je(e),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null)},d(f){f&&(P(l),P(n)),s&&s.d(f)}}}function Ve(t){let e,l,n,s,f,o,a;return{c(){e=U("line"),i(e,"x1",l=t[32].x),i(e,"y1",n=t[32].y1),i(e,"x2",s=t[32].x),i(e,"y2",f=t[32].y2),i(e,"stroke",o=t[32].isOld?"#ff6b6b":"#000"),i(e,"stroke-width","2"),i(e,"marker-end",a=t[32].isOld?"url(#arrow-old)":"url(#arrow)")},m(c,r){z(c,e,r)},p(c,r){r[0]&8&&l!==(l=c[32].x)&&i(e,"x1",l),r[0]&8&&n!==(n=c[32].y1)&&i(e,"y1",n),r[0]&8&&s!==(s=c[32].x)&&i(e,"x2",s),r[0]&8&&f!==(f=c[32].y2)&&i(e,"y2",f),r[0]&8&&o!==(o=c[32].isOld?"#ff6b6b":"#000")&&i(e,"stroke",o),r[0]&8&&a!==(a=c[32].isOld?"url(#arrow-old)":"url(#arrow)")&&i(e,"marker-end",a)},d(c){c&&P(e)}}}function Ze(t){let e,l=t[32].x>t[5].x&&t[32].x<t[5].x+t[5].w&&Ve(t);return{c(){l&&l.c(),e=re()},m(n,s){l&&l.m(n,s),z(n,e,s)},p(n,s){n[32].x>n[5].x&&n[32].x<n[5].x+n[5].w?l?l.p(n,s):(l=Ve(n),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},d(n){n&&P(e),l&&l.d(n)}}}function qe(t){let e,l,n;return{c(){e=T("div"),i(e,"class","splitter svelte-x4wxi1")},m(s,f){z(s,e,f),l||(n=he(e,"mousedown",t[12]),l=!0)},p:we,d(s){s&&P(e),l=!1,n()}}}function Ge(t){let e,l=te(Object.entries(t[1])),n=[];for(let s=0;s<l.length;s+=1)n[s]=Je(Ne(t,l,s));return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=re()},m(s,f){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(s,f);z(s,e,f)},p(s,f){if(f[0]&2){l=te(Object.entries(s[1]));let o;for(o=0;o<l.length;o+=1){const a=Ne(s,l,o);n[o]?n[o].p(a,f):(n[o]=Je(a),n[o].c(),n[o].m(e.parentNode,e))}for(;o<n.length;o+=1)n[o].d(1);n.length=l.length}},d(s){s&&P(e),pe(n,s)}}}function Je(t){let e,l,n=t[28]+"",s,f,o=t[29]+"",a;return{c(){e=T("div"),l=T("span"),s=G(n),f=T("b"),a=G(o),i(e,"class","row svelte-x4wxi1")},m(c,r){z(c,e,r),v(e,l),v(l,s),v(e,f),v(f,a)},p(c,r){r[0]&2&&n!==(n=c[28]+"")&&le(s,n),r[0]&2&&o!==(o=c[29]+"")&&le(a,o)},d(c){c&&P(e)}}}function Qe(t){let e,l,n,s,f,o,a=t[0].loadFactor.toFixed(2)+"",c,r,m,d,k,O,h=t[0].maxChainLen+"",B,X,S,K,x,j,Z=(t[0].maxChainBucketID>=0?t[0].maxChainBucketID:"—")+"",R,N,F,_,I,H,Q=t[0].numChains+"",w,M,p,y,C,D,L=t[0].numEmptyBuckets+"",Y;return{c(){e=T("h3"),e.textContent="stats",l=ee(),n=T("div"),s=T("span"),s.textContent="Load factor",f=ee(),o=T("b"),c=G(a),r=ee(),m=T("div"),d=T("span"),d.textContent="Max chain length",k=ee(),O=T("b"),B=G(h),X=ee(),S=T("div"),K=T("span"),K.textContent="Bucket with max chain",x=ee(),j=T("b"),R=G(Z),N=ee(),F=T("div"),_=T("span"),_.textContent="Chains count",I=ee(),H=T("b"),w=G(Q),M=ee(),p=T("div"),y=T("span"),y.textContent="Empty buckets",C=ee(),D=T("b"),Y=G(L),i(n,"class","row svelte-x4wxi1"),i(m,"class","row svelte-x4wxi1"),i(S,"class","row svelte-x4wxi1"),i(F,"class","row svelte-x4wxi1"),i(p,"class","row svelte-x4wxi1")},m(u,b){z(u,e,b),z(u,l,b),z(u,n,b),v(n,s),v(n,f),v(n,o),v(o,c),z(u,r,b),z(u,m,b),v(m,d),v(m,k),v(m,O),v(O,B),z(u,X,b),z(u,S,b),v(S,K),v(S,x),v(S,j),v(j,R),z(u,N,b),z(u,F,b),v(F,_),v(F,I),v(F,H),v(H,w),z(u,M,b),z(u,p,b),v(p,y),v(p,C),v(p,D),v(D,Y)},p(u,b){b[0]&1&&a!==(a=u[0].loadFactor.toFixed(2)+"")&&le(c,a),b[0]&1&&h!==(h=u[0].maxChainLen+"")&&le(B,h),b[0]&1&&Z!==(Z=(u[0].maxChainBucketID>=0?u[0].maxChainBucketID:"—")+"")&&le(R,Z),b[0]&1&&Q!==(Q=u[0].numChains+"")&&le(w,Q),b[0]&1&&L!==(L=u[0].numEmptyBuckets+"")&&le(Y,L)},d(u){u&&(P(e),P(l),P(n),P(r),P(m),P(X),P(S),P(N),P(F),P(M),P(p))}}}function Mt(t){let e,l,n,s=t[7]?"→":"← hmap",f,o,a,c,r,m,d,k,O,h,B,X=[],S=new Map,K,x,j,Z,R,N,F,_,I,H,Q=te(t[4]),w=[];for(let u=0;u<Q.length;u+=1)w[u]=De(Xe(t,Q,u));let M=te(t[2]);const p=u=>u[35].id;for(let u=0;u<M.length;u+=1){let b=xe(t,M,u),g=p(b);S.set(g,X[u]=Ue(g,b))}let y=te(t[3]),C=[];for(let u=0;u<y.length;u+=1)C[u]=Ze(Pe(t,y,u));let D=t[7]&&qe(t),L=t[1]&&Ge(t),Y=t[0]&&Qe(t);return{c(){e=T("div"),l=T("div"),n=T("button"),f=G(s),o=ee(),a=U("svg"),c=U("defs"),r=U("marker"),m=U("path"),d=U("marker"),k=U("path"),O=U("filter"),h=U("feDropShadow");for(let u=0;u<w.length;u+=1)w[u].c();B=re();for(let u=0;u<X.length;u+=1)X[u].c();K=re();for(let u=0;u<C.length;u+=1)C[u].c();j=ee(),D&&D.c(),Z=ee(),R=T("div"),N=T("h3"),N.textContent="hmap",F=ee(),L&&L.c(),_=ee(),Y&&Y.c(),i(n,"class","toggle-btn svelte-x4wxi1"),i(m,"d","M0,0 L6,3 L0,6 Z"),i(m,"fill","#000"),i(r,"id","arrow"),i(r,"markerWidth","6"),i(r,"markerHeight","6"),i(r,"refX","3"),i(r,"refY","3"),i(r,"orient","auto"),i(k,"d","M0,0 L6,3 L0,6 Z"),i(k,"fill","#ff6b6b"),i(d,"id","arrow-old"),i(d,"markerWidth","6"),i(d,"markerHeight","6"),i(d,"refX","3"),i(d,"refY","3"),i(d,"orient","auto"),i(h,"dx","4"),i(h,"dy","4"),i(h,"stdDeviation","1"),i(h,"flood-color","#51cf66"),i(h,"flood-opacity","0.5"),i(O,"id","bucket-shadow"),i(O,"x","-30%"),i(O,"y","-30%"),i(O,"width","140%"),i(O,"height","140%"),i(a,"viewBox",x=t[5].x+" "+t[5].y+" "+t[5].w+" "+t[5].h),i(a,"width","100%"),i(a,"height","100%"),i(a,"preserveAspectRatio","xMinYMin meet"),i(a,"class","svelte-x4wxi1"),i(l,"id","svg-container"),i(l,"class","svelte-x4wxi1"),i(R,"class","side svelte-x4wxi1"),be(R,"width",t[6]+"px"),be(R,"display",t[7]?"block":"none"),i(e,"class","root svelte-x4wxi1")},m(u,b){z(u,e,b),v(e,l),v(l,n),v(n,f),v(l,o),v(l,a),v(a,c),v(c,r),v(r,m),v(c,d),v(d,k),v(c,O),v(O,h);for(let g=0;g<w.length;g+=1)w[g]&&w[g].m(a,null);v(a,B);for(let g=0;g<X.length;g+=1)X[g]&&X[g].m(a,null);v(a,K);for(let g=0;g<C.length;g+=1)C[g]&&C[g].m(a,null);v(e,j),D&&D.m(e,null),v(e,Z),v(e,R),v(R,N),v(R,F),L&&L.m(R,null),v(R,_),Y&&Y.m(R,null),I||(H=[he(n,"click",t[13]),he(l,"wheel",t[8],{passive:!1}),he(l,"mousedown",t[9]),he(l,"mousemove",t[11]),he(l,"mouseup",t[10]),he(l,"mouseleave",t[10])],I=!0)},p(u,b){if(b[0]&128&&s!==(s=u[7]?"→":"← hmap")&&le(f,s),b[0]&16){Q=te(u[4]);let g;for(g=0;g<Q.length;g+=1){const W=Xe(u,Q,g);w[g]?w[g].p(W,b):(w[g]=De(W),w[g].c(),w[g].m(a,B))}for(;g<w.length;g+=1)w[g].d(1);w.length=Q.length}if(b[0]&36&&(M=te(u[2]),X=vt(X,b,p,1,u,M,S,a,wt,Ue,K,xe)),b[0]&40){y=te(u[3]);let g;for(g=0;g<y.length;g+=1){const W=Pe(u,y,g);C[g]?C[g].p(W,b):(C[g]=Ze(W),C[g].c(),C[g].m(a,null))}for(;g<C.length;g+=1)C[g].d(1);C.length=y.length}b[0]&32&&x!==(x=u[5].x+" "+u[5].y+" "+u[5].w+" "+u[5].h)&&i(a,"viewBox",x),u[7]?D?D.p(u,b):(D=qe(u),D.c(),D.m(e,Z)):D&&(D.d(1),D=null),u[1]?L?L.p(u,b):(L=Ge(u),L.c(),L.m(R,_)):L&&(L.d(1),L=null),u[0]?Y?Y.p(u,b):(Y=Qe(u),Y.c(),Y.m(R,null)):Y&&(Y.d(1),Y=null),b[0]&64&&be(R,"width",u[6]+"px"),b[0]&128&&be(R,"display",u[7]?"block":"none")},i:we,o:we,d(u){u&&P(e),pe(w,u);for(let b=0;b<X.length;b+=1)X[b].d();pe(C,u),D&&D.d(),L&&L.d(),Y&&Y.d(),I=!1,ve(H)}}}const V=18,J=24,E=22,_e=80,fe=40,$e=4,et=12,se=12,tt=1.5,ue=27;function Bt(t,e,l){let n=null,s=null,f=!1,o=[],a=[],c=[],r=[],m=null,d=[],k=[],O=[],h={x:0,y:0,w:1200,h:900},B=280,X=280,S=!0,K=!1,x=!1;async function j(){try{const[w,M,p]=await Promise.all([fetch("/vizual").catch(()=>null),fetch("/vizual_old").catch(()=>null),fetch("/hmap").catch(()=>null)]);if(w!=null&&w.ok){const y=await w.json();l(0,s=y.stats??null),Array.isArray(y.buckets)&&y.buckets.length>0?o=y.buckets:(o=[],c=[],r=[],l(2,d=[]),l(3,k=[]),l(4,O=[]))}if(M!=null&&M.ok){const y=await M.json();Array.isArray(y.buckets)?a=y.buckets:a=[]}if(p!=null&&p.ok&&l(1,m=await p.json()),c=[],Array.isArray(o)){let y=[];for(const C of o)C&&C.type==="main"?(y.length&&c.push(y),y=[C]):C&&y.push(C);y.length&&c.push(y)}if(r=[],Array.isArray(a)){let y=[];for(const C of a)C&&C.type==="main"?(y.length&&r.push(y),y=[C]):C&&y.push(C);y.length&&r.push(y)}if(R(),!f){const y=document.getElementById("svg-container");if(y){const C=y.getBoundingClientRect(),D=C.height/C.width;l(5,h.w=1200,h),l(5,h.h=1200*D,h),l(5,h),f=!0}}}catch(w){console.error("Ошибка загрузки данных:",w)}}function Z(){n&&n.close();const w=location.protocol==="https:"?"wss":"ws";n=new WebSocket(`${w}://${location.host}/ws`),n.onopen=()=>{console.log("[ws] connected")},n.onmessage=()=>{j()},n.onclose=()=>{console.log("[ws] disconnected, retrying..."),setTimeout(Z,1e3)},n.onerror=()=>{n.close()}}function R(){l(2,d=[]),l(3,k=[]),l(4,O=[]);const w=r&&r.length>0,M=c&&c.length>0,p=w&&M;let y=0;if(w)for(const g of r)for(const W of g)W&&W.type==="main"&&(W.displayBid=y++);let C=0;if(M)for(const g of c)for(const W of g)W&&W.type==="main"&&(W.displayBid=C++);const D=[];for(let g=0;g<Math.max(w?r.length:0,M?c.length:0);g++){let W=260;if(w&&g<r.length&&r[g].length>0){const $=r[g],q=Math.max(...$.map(A=>A.tophash&&Array.isArray(A.tophash)?A.tophash.length:0))*ue,ne=$.map(A=>{const ae=A.keys&&Array.isArray(A.keys)?A.keys:[],ce=A.values&&Array.isArray(A.values)?A.values:[];return Math.max(...ae.map(oe=>oe?oe.toString().length:0),...ce.map(oe=>oe?oe.toString().length:0),A.overflow?A.overflow.toString().length:0,0)*8+se*2});W=Math.max(W,...ne,q)}if(M&&g<c.length&&c[g].length>0){const $=c[g],q=Math.max(...$.map(A=>A.tophash&&Array.isArray(A.tophash)?A.tophash.length:0))*ue,ne=$.map(A=>{const ae=A.keys&&Array.isArray(A.keys)?A.keys:[],ce=A.values&&Array.isArray(A.values)?A.values:[];return Math.max(...ae.map(oe=>oe?oe.toString().length:0),...ce.map(oe=>oe?oe.toString().length:0),A.overflow?A.overflow.toString().length:0,0)*8+se*2});W=Math.max(W,...ne,q)}D.push(W)}let L=_e,Y=0,u=fe+(p?30:0),b=fe;if(w){for(let g=0;g<r.length;g++){const W=r[g];if(!W||W.length===0)continue;const $=D[g]||260;let q=u;for(let ne=0;ne<W.length;ne++){const A=W[ne];if(!A)continue;const ae=A.keys&&Array.isArray(A.keys)?A.keys:[],ce=A.values&&Array.isArray(A.values)?A.values:[],ie=V+J+ae.length*E+ce.length*E+E+se*2;d.push({id:`old-${A.id}`,x:L,y:q,width:$,height:ie,bucket:A,padding:se,isOld:!0}),ne<W.length-1&&k.push({x:L+$/2,y1:q+ie,y2:q+ie+fe-$e,isOld:!0}),q+=ie+fe,q>Y&&(Y=q)}L+=$+_e}p&&O.push({x:_e,y:fe+20,text:"OLD",isOld:!0}),b=Y+fe*2}if(M){L=_e;for(let g=0;g<c.length;g++){const W=c[g];if(!W||W.length===0)continue;const $=D[g]||260;let q=b;for(let ne=0;ne<W.length;ne++){const A=W[ne];if(!A)continue;const ae=A.keys&&Array.isArray(A.keys)?A.keys:[],ce=A.values&&Array.isArray(A.values)?A.values:[],ie=V+J+ae.length*E+ce.length*E+E+se*2;d.push({id:A.id,x:L,y:q,width:$,height:ie,bucket:A,padding:se,isOld:!1}),ne<W.length-1&&k.push({x:L+$/2,y1:q+ie,y2:q+ie+fe-$e,isOld:!1}),q+=ie+fe}L+=$+_e}p&&O.push({x:_e,y:b-fe+20,text:"NEW",isOld:!1})}}function N(w){w.preventDefault();const M=w.currentTarget.getBoundingClientRect();if(w.ctrlKey||w.metaKey){const p=w.clientX-M.left,y=w.clientY-M.top,C=h.x+p*h.w/M.width,D=h.y+y*h.h/M.height,L=Math.pow(1.001,w.deltaY*5),Y=h.w*L,u=h.h*L;if(Y<100||Y>4e4)return;l(5,h.x=C-p/M.width*Y,h),l(5,h.y=D-y/M.height*u,h),l(5,h.w=Y,h),l(5,h.h=u,h)}else l(5,h.x+=w.deltaX*h.w/M.width,h),l(5,h.y+=w.deltaY*h.h/M.height,h);l(5,h)}function F(w){w.button===0&&(x=!0)}function _(){x=!1}function I(w){if(x){const M=document.getElementById("svg-container").getBoundingClientRect();l(5,h.x-=w.movementX*h.w/M.width,h),l(5,h.y-=w.movementY*h.h/M.height,h),l(5,h)}}function H(w){K=!0;const M=w.clientX,p=B,C=document.getElementById("svg-container").getBoundingClientRect(),D=h.w/C.width;C.height/C.width;const L=u=>{if(!K)return;const b=M-u.clientX,g=Math.max(100,Math.min(800,p+b)),W=g-B;l(6,B=g),l(5,h.w-=W*D,h);const $=C.width-(g-p);l(5,h.h=h.w*(C.height/$),h),l(5,h)},Y=()=>{K=!1,window.removeEventListener("mousemove",L),window.removeEventListener("mouseup",Y)};window.addEventListener("mousemove",L),window.addEventListener("mouseup",Y)}function Q(){const w=document.getElementById("svg-container"),M=w.getBoundingClientRect(),p=h.w/M.width;S?(X=B,l(5,h.w+=B*p,h),l(6,B=0),l(7,S=!1)):(l(6,B=X),l(5,h.w-=B*p,h),l(7,S=!0)),setTimeout(()=>{const y=w.getBoundingClientRect();l(5,h.h=h.w*(y.height/y.width),h),l(5,h)},0)}return ht(()=>{j(),Z()}),[s,m,d,k,O,h,B,S,N,F,_,I,H,Q]}class St extends Ot{constructor(e){super(),At(this,e,Bt,Mt,rt,{},null,[-1,-1])}}new St({target:document.getElementById("app")});
