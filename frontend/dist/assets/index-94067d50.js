var be=Object.defineProperty;var ve=(e,t,n)=>t in e?be(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var U=(e,t,n)=>(ve(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))o(f);new MutationObserver(f=>{for(const h of f)if(h.type==="childList")for(const a of h.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function n(f){const h={};return f.integrity&&(h.integrity=f.integrity),f.referrerPolicy&&(h.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?h.credentials="include":f.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function o(f){if(f.ep)return;f.ep=!0;const h=n(f);fetch(f.href,h)}})();function Y(){}function ge(e){return e()}function ee(){return Object.create(null)}function q(e){e.forEach(ge)}function pe(e){return typeof e=="function"}function we(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function ye(e){return Object.keys(e).length===0}function E(e,t){e.appendChild(t)}function P(e,t,n){e.insertBefore(t,n||null)}function S(e){e.parentNode&&e.parentNode.removeChild(e)}function j(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function ke(e){return document.createElement(e)}function K(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function R(e){return document.createTextNode(e)}function J(){return R("")}function l(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function $e(e){return Array.from(e.childNodes)}function G(e,t){t=""+t,e.data!==t&&(e.data=t)}function X(e,t,n,o){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}let F;function T(e){F=e}function Ke(){if(!F)throw new Error("Function called outside component initialization");return F}function Ee(e){Ke().$$.on_mount.push(e)}const H=[],te=[];let I=[];const ne=[],Le=Promise.resolve();let Q=!1;function Oe(){Q||(Q=!0,Le.then(me))}function x(e){I.push(e)}const Z=new Set;let B=0;function me(){if(B!==0)return;const e=F;do{try{for(;B<H.length;){const t=H[B];B++,T(t),Se(t.$$)}}catch(t){throw H.length=0,B=0,t}for(T(null),H.length=0,B=0;te.length;)te.pop()();for(let t=0;t<I.length;t+=1){const n=I[t];Z.has(n)||(Z.add(n),n())}I.length=0}while(H.length);for(;ne.length;)ne.pop()();Q=!1,Z.clear(),T(e)}function Se(e){if(e.fragment!==null){e.update(),q(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(x)}}function Ve(e){const t=[],n=[];I.forEach(o=>e.indexOf(o)===-1?t.push(o):n.push(o)),n.forEach(o=>o()),I=t}const Ae=new Set;function Ne(e,t){e&&e.i&&(Ae.delete(e),e.i(t))}function O(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Pe(e,t,n){const{fragment:o,after_update:f}=e.$$;o&&o.m(t,n),x(()=>{const h=e.$$.on_mount.map(ge).filter(pe);e.$$.on_destroy?e.$$.on_destroy.push(...h):q(h),e.$$.on_mount=[]}),f.forEach(x)}function Ce(e,t){const n=e.$$;n.fragment!==null&&(Ve(n.after_update),q(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Me(e,t){e.$$.dirty[0]===-1&&(H.push(e),Oe(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function We(e,t,n,o,f,h,a=null,_=[-1]){const p=F;T(e);const u=e.$$={fragment:null,ctx:[],props:h,update:Y,not_equal:f,bound:ee(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(p?p.$$.context:[])),callbacks:ee(),dirty:_,skip_bound:!1,root:t.target||p.$$.root};a&&a(u.root);let g=!1;if(u.ctx=n?n(e,t.props||{},(i,d,...s)=>{const v=s.length?s[0]:d;return u.ctx&&f(u.ctx[i],u.ctx[i]=v)&&(!u.skip_bound&&u.bound[i]&&u.bound[i](v),g&&Me(e,i)),d}):[],u.update(),g=!0,q(u.before_update),u.fragment=o?o(u.ctx):!1,t.target){if(t.hydrate){const i=$e(t.target);u.fragment&&u.fragment.l(i),i.forEach(S)}else u.fragment&&u.fragment.c();t.intro&&Ne(e.$$.fragment),Pe(e,t.target,t.anchor),me()}T(p)}class ze{constructor(){U(this,"$$");U(this,"$$set")}$destroy(){Ce(this,1),this.$destroy=Y}$on(t,n){if(!pe(n))return Y;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const f=o.indexOf(n);f!==-1&&o.splice(f,1)}}$set(t){this.$$set&&!ye(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Be="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Be);function le(e,t,n){const o=e.slice();return o[8]=t[n],o}function ie(e,t,n){const o=e.slice();return o[11]=t[n],o}function oe(e,t,n){const o=e.slice();return o[14]=t[n],o[16]=n,o}function fe(e,t,n){const o=e.slice();return o[17]=t[n],o[16]=n,o}function re(e,t,n){const o=e.slice();return o[19]=t[n],o[16]=n,o}function se(e){let t,n,o,f,h=e[19]+"",a,_,p;return{c(){t=K("rect"),f=K("text"),a=R(h),l(t,"x",n=e[11].padding+e[16]*M),l(t,"y",o=e[11].padding),l(t,"width",M),l(t,"height",$),l(t,"fill","#eee"),l(t,"stroke","#000"),l(f,"x",_=e[11].padding+e[16]*M+M/2),l(f,"y",p=e[11].padding+$/1.5),l(f,"font-size","12"),l(f,"text-anchor","middle")},m(u,g){P(u,t,g),P(u,f,g),E(f,a)},p(u,g){g&1&&n!==(n=u[11].padding+u[16]*M)&&l(t,"x",n),g&1&&o!==(o=u[11].padding)&&l(t,"y",o),g&1&&h!==(h=u[19]+"")&&G(a,h),g&1&&_!==(_=u[11].padding+u[16]*M+M/2)&&l(f,"x",_),g&1&&p!==(p=u[11].padding+$/1.5)&&l(f,"y",p)},d(u){u&&(S(t),S(f))}}}function ue(e){let t,n,o,f,h,a,_=(e[17]??"")+"",p,u,g;return{c(){t=K("rect"),a=K("text"),p=R(_),l(t,"x",n=e[11].padding),l(t,"y",o=e[11].padding+$+e[16]*m),l(t,"width",f=e[11].width-N*2),l(t,"height",m),l(t,"fill",h=e[17]==null?"#dbfdc9":"#b2f2bb"),l(t,"stroke","#12b886"),l(t,"class","cell-key svelte-119ikyi"),l(a,"x",u=e[11].padding+6),l(a,"y",g=e[11].padding+$+e[16]*m+m/1.5),l(a,"font-size","13")},m(i,d){P(i,t,d),P(i,a,d),E(a,p)},p(i,d){d&1&&n!==(n=i[11].padding)&&l(t,"x",n),d&1&&o!==(o=i[11].padding+$+i[16]*m)&&l(t,"y",o),d&1&&f!==(f=i[11].width-N*2)&&l(t,"width",f),d&1&&h!==(h=i[17]==null?"#dbfdc9":"#b2f2bb")&&l(t,"fill",h),d&1&&_!==(_=(i[17]??"")+"")&&G(p,_),d&1&&u!==(u=i[11].padding+6)&&l(a,"x",u),d&1&&g!==(g=i[11].padding+$+i[16]*m+m/1.5)&&l(a,"y",g)},d(i){i&&(S(t),S(a))}}}function ce(e){let t,n,o,f,h,a,_=(e[14]??"")+"",p,u,g;return{c(){t=K("rect"),a=K("text"),p=R(_),l(t,"x",n=e[11].padding),l(t,"y",o=e[11].padding+$+e[11].bucket.Keys.length*m+e[16]*m),l(t,"width",f=e[11].width-N*2),l(t,"height",m),l(t,"fill",h=e[14]==null?"#fff2b8":"#ffec99"),l(t,"stroke","#ffa94d"),l(t,"class","cell-value svelte-119ikyi"),l(a,"x",u=e[11].padding+6),l(a,"y",g=e[11].padding+$+e[11].bucket.Keys.length*m+e[16]*m+m/1.5),l(a,"font-size","13")},m(i,d){P(i,t,d),P(i,a,d),E(a,p)},p(i,d){d&1&&n!==(n=i[11].padding)&&l(t,"x",n),d&1&&o!==(o=i[11].padding+$+i[11].bucket.Keys.length*m+i[16]*m)&&l(t,"y",o),d&1&&f!==(f=i[11].width-N*2)&&l(t,"width",f),d&1&&h!==(h=i[14]==null?"#fff2b8":"#ffec99")&&l(t,"fill",h),d&1&&_!==(_=(i[14]??"")+"")&&G(p,_),d&1&&u!==(u=i[11].padding+6)&&l(a,"x",u),d&1&&g!==(g=i[11].padding+$+i[11].bucket.Keys.length*m+i[16]*m+m/1.5)&&l(a,"y",g)},d(i){i&&(S(t),S(a))}}}function ae(e){let t,n,o,f,h,a,_,p,u,g,i,d=e[11].bucket.overflow+"",s,v,W,z,V=O(e[11].bucket.tophash),b=[];for(let r=0;r<V.length;r+=1)b[r]=se(re(e,V,r));let L=O(e[11].bucket.Keys),y=[];for(let r=0;r<L.length;r+=1)y[r]=ue(fe(e,L,r));let A=O(e[11].bucket.Values),w=[];for(let r=0;r<A.length;r+=1)w[r]=ce(oe(e,A,r));return{c(){t=K("g"),n=K("rect");for(let r=0;r<b.length;r+=1)b[r].c();h=J();for(let r=0;r<y.length;r+=1)y[r].c();a=J();for(let r=0;r<w.length;r+=1)w[r].c();_=K("rect"),i=K("text"),s=R(d),l(n,"class","bucket-rect svelte-119ikyi"),l(n,"x",0),l(n,"y",0),l(n,"width",o=e[11].width),l(n,"height",f=e[11].height),l(n,"fill","#fff"),l(n,"stroke","#000"),l(n,"stroke-width",je),l(n,"rx",_e),l(n,"ry",_e),l(_,"x",p=e[11].padding),l(_,"y",u=e[11].padding+$+e[11].bucket.Keys.length*m+e[11].bucket.Values.length*m),l(_,"width",g=e[11].width-N*2),l(_,"height",m),l(_,"fill","#ddd"),l(_,"stroke","#000"),l(i,"x",v=e[11].padding+6),l(i,"y",W=e[11].padding+$+e[11].bucket.Keys.length*m+e[11].bucket.Values.length*m+m/1.5),l(i,"font-size","12"),l(t,"transform",z=`translate(${e[11].x}, ${e[11].y})`),l(t,"class","bucket-group svelte-119ikyi")},m(r,k){P(r,t,k),E(t,n);for(let c=0;c<b.length;c+=1)b[c]&&b[c].m(t,null);E(t,h);for(let c=0;c<y.length;c+=1)y[c]&&y[c].m(t,null);E(t,a);for(let c=0;c<w.length;c+=1)w[c]&&w[c].m(t,null);E(t,_),E(t,i),E(i,s)},p(r,k){if(k&1&&o!==(o=r[11].width)&&l(n,"width",o),k&1&&f!==(f=r[11].height)&&l(n,"height",f),k&1){V=O(r[11].bucket.tophash);let c;for(c=0;c<V.length;c+=1){const C=re(r,V,c);b[c]?b[c].p(C,k):(b[c]=se(C),b[c].c(),b[c].m(t,h))}for(;c<b.length;c+=1)b[c].d(1);b.length=V.length}if(k&1){L=O(r[11].bucket.Keys);let c;for(c=0;c<L.length;c+=1){const C=fe(r,L,c);y[c]?y[c].p(C,k):(y[c]=ue(C),y[c].c(),y[c].m(t,a))}for(;c<y.length;c+=1)y[c].d(1);y.length=L.length}if(k&1){A=O(r[11].bucket.Values);let c;for(c=0;c<A.length;c+=1){const C=oe(r,A,c);w[c]?w[c].p(C,k):(w[c]=ce(C),w[c].c(),w[c].m(t,_))}for(;c<w.length;c+=1)w[c].d(1);w.length=A.length}k&1&&p!==(p=r[11].padding)&&l(_,"x",p),k&1&&u!==(u=r[11].padding+$+r[11].bucket.Keys.length*m+r[11].bucket.Values.length*m)&&l(_,"y",u),k&1&&g!==(g=r[11].width-N*2)&&l(_,"width",g),k&1&&d!==(d=r[11].bucket.overflow+"")&&G(s,d),k&1&&v!==(v=r[11].padding+6)&&l(i,"x",v),k&1&&W!==(W=r[11].padding+$+r[11].bucket.Keys.length*m+r[11].bucket.Values.length*m+m/1.5)&&l(i,"y",W),k&1&&z!==(z=`translate(${r[11].x}, ${r[11].y})`)&&l(t,"transform",z)},d(r){r&&S(t),j(b,r),j(y,r),j(w,r)}}}function he(e){let t,n,o,f,h;return{c(){t=K("line"),l(t,"x1",n=e[8].x),l(t,"y1",o=e[8].y1),l(t,"x2",f=e[8].x),l(t,"y2",h=e[8].y2),l(t,"stroke","#000"),l(t,"stroke-width","2"),l(t,"marker-end","url(#arrow)")},m(a,_){P(a,t,_)},p(a,_){_&2&&n!==(n=a[8].x)&&l(t,"x1",n),_&2&&o!==(o=a[8].y1)&&l(t,"y1",o),_&2&&f!==(f=a[8].x)&&l(t,"x2",f),_&2&&h!==(h=a[8].y2)&&l(t,"y2",h)},d(a){a&&S(t)}}}function He(e){let t,n,o,f,h,a,_=O(e[0]),p=[];for(let i=0;i<_.length;i+=1)p[i]=ae(ie(e,_,i));let u=O(e[1]),g=[];for(let i=0;i<u.length;i+=1)g[i]=he(le(e,u,i));return{c(){t=ke("div"),n=K("svg"),o=K("defs"),f=K("marker"),h=K("path");for(let i=0;i<p.length;i+=1)p[i].c();a=J();for(let i=0;i<g.length;i+=1)g[i].c();l(h,"d","M0,0 L6,3 L0,6 Z"),l(h,"fill","#000"),l(f,"id","arrow"),l(f,"markerWidth","6"),l(f,"markerHeight","6"),l(f,"refX","3"),l(f,"refY","3"),l(f,"orient","auto"),l(n,"width",e[2]),l(n,"height",e[3]),l(n,"class","svelte-119ikyi"),l(t,"id","svg-container"),X(t,"width","100vw"),X(t,"height","100vh"),X(t,"overflow","auto"),X(t,"background","#ebfbee")},m(i,d){P(i,t,d),E(t,n),E(n,o),E(o,f),E(f,h);for(let s=0;s<p.length;s+=1)p[s]&&p[s].m(n,null);E(n,a);for(let s=0;s<g.length;s+=1)g[s]&&g[s].m(n,null)},p(i,[d]){if(d&1){_=O(i[0]);let s;for(s=0;s<_.length;s+=1){const v=ie(i,_,s);p[s]?p[s].p(v,d):(p[s]=ae(v),p[s].c(),p[s].m(n,a))}for(;s<p.length;s+=1)p[s].d(1);p.length=_.length}if(d&2){u=O(i[1]);let s;for(s=0;s<u.length;s+=1){const v=le(i,u,s);g[s]?g[s].p(v,d):(g[s]=he(v),g[s].c(),g[s].m(n,null))}for(;s<g.length;s+=1)g[s].d(1);g.length=u.length}d&4&&l(n,"width",i[2]),d&8&&l(n,"height",i[3])},i:Y,o:Y,d(i){i&&S(t),j(p,i),j(g,i)}}}const $=24,m=22,de=80,D=40,Ie=4,_e=12,N=12,je=1.5,M=27;function Te(e,t,n){let o=[],f=[],h=[],a=[],_=2e3,p=2e3;async function u(){o=await(await fetch("/vizual")).json(),f=[];let d=[];for(const s of o)s.type==="main"?(d.length&&f.push(d),d=[s]):d.push(s);d.length&&f.push(d),g(),setTimeout(()=>{const s=document.getElementById("svg-container");s&&(s.scrollLeft=0,s.scrollTop=0)},0)}function g(){n(0,h=[]),n(1,a=[]);let i=de,d=0;for(const s of f){let v=D;const W=Math.max(...s.map(b=>b.tophash.length))*M,z=s.map(b=>{const L=b.Keys.map(r=>r?r.toString().length:0),y=b.Values.map(r=>r?r.toString().length:0),A=b.overflow?b.overflow.toString().length:0;return Math.max(...L,...y,A,0)*8+N*2}),V=Math.max(...z,W,260);for(let b=0;b<s.length;b++){const L=s[b],y=V,w=$+L.Keys.length*m+L.Values.length*m+m+N*2;if(h.push({id:L.id,x:i,y:v,width:y,height:w,bucket:L,padding:N}),b<s.length-1){const r=v+w+D;a.push({x:i+y/2,y1:v+w,y2:r-Ie}),v=r}else v+=w+D;v>d&&(d=v)}i+=V+de}n(2,_=i+200),n(3,p=d+200)}return Ee(u),[h,a,_,p]}class Ye extends ze{constructor(t){super(),We(this,t,Te,He,we,{})}}new Ye({target:document.getElementById("app")});
