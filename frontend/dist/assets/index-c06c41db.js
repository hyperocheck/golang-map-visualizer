var Fe=Object.defineProperty;var Je=(t,e,n)=>e in t?Fe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var he=(t,e,n)=>(Je(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const f of o)if(f.type==="childList")for(const i of f.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const f={};return o.integrity&&(f.integrity=o.integrity),o.referrerPolicy&&(f.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?f.credentials="include":o.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function l(o){if(o.ep)return;o.ep=!0;const f=n(o);fetch(o.href,f)}})();function x(){}function Te(t){return t()}function ge(){return Object.create(null)}function oe(t){t.forEach(Te)}function ze(t){return typeof t=="function"}function Ue(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function qe(t){return Object.keys(t).length===0}function M(t,e){t.appendChild(e)}function V(t,e,n){t.insertBefore(e,n||null)}function L(t){t.parentNode&&t.parentNode.removeChild(t)}function ue(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function D(t){return document.createElement(t)}function A(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function J(t){return document.createTextNode(t)}function ne(){return J(" ")}function F(){return J("")}function U(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function s(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Ge(t){return Array.from(t.childNodes)}function $(t,e){e=""+e,t.data!==e&&(t.data=e)}function fe(t,e,n,l){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,l?"important":"")}let se;function ie(t){se=t}function Ze(){if(!se)throw new Error("Function called outside component initialization");return se}function Qe(t){Ze().$$.on_mount.push(t)}const te=[],pe=[];let le=[];const me=[],$e=Promise.resolve();let de=!1;function xe(){de||(de=!0,$e.then(Ae))}function _e(t){le.push(t)}const ae=new Set;let ee=0;function Ae(){if(ee!==0)return;const t=se;do{try{for(;ee<te.length;){const e=te[ee];ee++,ie(e),et(e.$$)}}catch(e){throw te.length=0,ee=0,e}for(ie(null),te.length=0,ee=0;pe.length;)pe.pop()();for(let e=0;e<le.length;e+=1){const n=le[e];ae.has(n)||(ae.add(n),n())}le.length=0}while(te.length);for(;me.length;)me.pop()();de=!1,ae.clear(),ie(t)}function et(t){if(t.fragment!==null){t.update(),oe(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(_e)}}function tt(t){const e=[],n=[];le.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),le=e}const nt=new Set;function je(t,e){t&&t.i&&(nt.delete(t),t.i(e))}function H(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function lt(t,e){t.d(1),e.delete(t.key)}function ot(t,e,n,l,o,f,i,r,u,h,g,c){let _=t.length,N=f.length,S=_;const T={};for(;S--;)T[t[S].key]=S;const R=[],k=new Map,X=new Map,B=[];for(S=N;S--;){const E=c(o,f,S),z=n(E);let P=i.get(z);P?l&&B.push(()=>P.p(E,e)):(P=h(z,E),P.c()),k.set(z,R[S]=P),z in T&&X.set(z,Math.abs(S-T[z]))}const m=new Set,Y=new Set;function G(E){je(E,1),E.m(r,g),i.set(E.key,E),g=E.first,N--}for(;_&&N;){const E=R[N-1],z=t[_-1],P=E.key,O=z.key;E===z?(g=E.first,_--,N--):k.has(O)?!i.has(P)||m.has(P)?G(E):Y.has(O)?_--:X.get(P)>X.get(O)?(Y.add(P),G(E)):(m.add(O),_--):(u(z,i),_--)}for(;_--;){const E=t[_];k.has(E.key)||u(E,i)}for(;N;)G(R[N-1]);return oe(B),R}function it(t,e,n){const{fragment:l,after_update:o}=t.$$;l&&l.m(e,n),_e(()=>{const f=t.$$.on_mount.map(Te).filter(ze);t.$$.on_destroy?t.$$.on_destroy.push(...f):oe(f),t.$$.on_mount=[]}),o.forEach(_e)}function st(t,e){const n=t.$$;n.fragment!==null&&(tt(n.after_update),oe(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function ut(t,e){t.$$.dirty[0]===-1&&(te.push(t),xe(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ft(t,e,n,l,o,f,i=null,r=[-1]){const u=se;ie(t);const h=t.$$={fragment:null,ctx:[],props:f,update:x,not_equal:o,bound:ge(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:ge(),dirty:r,skip_bound:!1,root:e.target||u.$$.root};i&&i(h.root);let g=!1;if(h.ctx=n?n(t,e.props||{},(c,_,...N)=>{const S=N.length?N[0]:_;return h.ctx&&o(h.ctx[c],h.ctx[c]=S)&&(!h.skip_bound&&h.bound[c]&&h.bound[c](S),g&&ut(t,c)),_}):[],h.update(),g=!0,oe(h.before_update),h.fragment=l?l(h.ctx):!1,e.target){if(e.hydrate){const c=Ge(e.target);h.fragment&&h.fragment.l(c),c.forEach(L)}else h.fragment&&h.fragment.c();e.intro&&je(t.$$.fragment),it(t,e.target,e.anchor),Ae()}ie(u)}class ct{constructor(){he(this,"$$");he(this,"$$set")}$destroy(){st(this,1),this.$destroy=x}$on(e,n){if(!ze(n))return x;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const o=l.indexOf(n);o!==-1&&l.splice(o,1)}}$set(e){this.$$set&&!qe(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const rt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(rt);function we(t,e,n){const l=t.slice();return l[26]=e[n][0],l[27]=e[n][1],l}function be(t,e,n){const l=t.slice();return l[30]=e[n],l}function ke(t,e,n){const l=t.slice();return l[33]=e[n],l}function ye(t,e,n){const l=t.slice();return l[36]=e[n],l[38]=n,l}function ve(t,e,n){const l=t.slice();return l[39]=e[n],l[38]=n,l}function Me(t,e,n){const l=t.slice();return l[41]=e[n],l[38]=n,l}function Ke(t){let e,n,l,o,f,i,r,u,h,g,c,_=(t[33].bucket.overflow||"")+"",N,S,T,R,k=t[33].bucket.tophash&&Se(t),X=t[33].bucket.Keys&&Xe(t),B=t[33].bucket.Values&&Ne(t);return{c(){e=A("g"),n=A("rect"),k&&k.c(),f=F(),X&&X.c(),i=F(),B&&B.c(),r=A("rect"),c=A("text"),N=J(_),s(n,"class","bucket-rect svelte-1u31mpo"),s(n,"width",l=t[33].width),s(n,"height",o=t[33].height),s(n,"fill","#fff"),s(n,"stroke","#000"),s(n,"stroke-width",mt),s(n,"rx",We),s(n,"ry",We),s(r,"x",u=t[33].padding),s(r,"y",h=t[33].padding+W+((t[33].bucket.Keys?t[33].bucket.Keys.length:0)+(t[33].bucket.Values?t[33].bucket.Values.length:0))*K),s(r,"width",g=t[33].width-q*2),s(r,"height",K),s(r,"fill","#ddd"),s(r,"stroke","#000"),s(c,"x",S=t[33].padding+6),s(c,"y",T=t[33].padding+W+((t[33].bucket.Keys?t[33].bucket.Keys.length:0)+(t[33].bucket.Values?t[33].bucket.Values.length:0))*K+K/1.5),s(c,"font-size","12"),s(e,"transform",R=`translate(${t[33].x}, ${t[33].y})`),s(e,"class","bucket-group svelte-1u31mpo")},m(m,Y){V(m,e,Y),M(e,n),k&&k.m(e,null),M(e,f),X&&X.m(e,null),M(e,i),B&&B.m(e,null),M(e,r),M(e,c),M(c,N)},p(m,Y){Y[0]&2&&l!==(l=m[33].width)&&s(n,"width",l),Y[0]&2&&o!==(o=m[33].height)&&s(n,"height",o),m[33].bucket.tophash?k?k.p(m,Y):(k=Se(m),k.c(),k.m(e,f)):k&&(k.d(1),k=null),m[33].bucket.Keys?X?X.p(m,Y):(X=Xe(m),X.c(),X.m(e,i)):X&&(X.d(1),X=null),m[33].bucket.Values?B?B.p(m,Y):(B=Ne(m),B.c(),B.m(e,r)):B&&(B.d(1),B=null),Y[0]&2&&u!==(u=m[33].padding)&&s(r,"x",u),Y[0]&2&&h!==(h=m[33].padding+W+((m[33].bucket.Keys?m[33].bucket.Keys.length:0)+(m[33].bucket.Values?m[33].bucket.Values.length:0))*K)&&s(r,"y",h),Y[0]&2&&g!==(g=m[33].width-q*2)&&s(r,"width",g),Y[0]&2&&_!==(_=(m[33].bucket.overflow||"")+"")&&$(N,_),Y[0]&2&&S!==(S=m[33].padding+6)&&s(c,"x",S),Y[0]&2&&T!==(T=m[33].padding+W+((m[33].bucket.Keys?m[33].bucket.Keys.length:0)+(m[33].bucket.Values?m[33].bucket.Values.length:0))*K+K/1.5)&&s(c,"y",T),Y[0]&2&&R!==(R=`translate(${m[33].x}, ${m[33].y})`)&&s(e,"transform",R)},d(m){m&&L(e),k&&k.d(),X&&X.d(),B&&B.d()}}}function Se(t){let e,n=H(t[33].bucket.tophash),l=[];for(let o=0;o<n.length;o+=1)l[o]=Ee(Me(t,n,o));return{c(){for(let o=0;o<l.length;o+=1)l[o].c();e=F()},m(o,f){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(o,f);V(o,e,f)},p(o,f){if(f[0]&2){n=H(o[33].bucket.tophash);let i;for(i=0;i<n.length;i+=1){const r=Me(o,n,i);l[i]?l[i].p(r,f):(l[i]=Ee(r),l[i].c(),l[i].m(e.parentNode,e))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length}},d(o){o&&L(e),ue(l,o)}}}function Ee(t){let e,n,l,o,f=t[41]+"",i,r,u;return{c(){e=A("rect"),o=A("text"),i=J(f),s(e,"x",n=t[33].padding+t[38]*Q),s(e,"y",l=t[33].padding),s(e,"width",Q),s(e,"height",W),s(e,"fill","#eee"),s(e,"stroke","#000"),s(o,"x",r=t[33].padding+t[38]*Q+Q/2),s(o,"y",u=t[33].padding+W/1.5),s(o,"font-size","12"),s(o,"text-anchor","middle")},m(h,g){V(h,e,g),V(h,o,g),M(o,i)},p(h,g){g[0]&2&&n!==(n=h[33].padding+h[38]*Q)&&s(e,"x",n),g[0]&2&&l!==(l=h[33].padding)&&s(e,"y",l),g[0]&2&&f!==(f=h[41]+"")&&$(i,f),g[0]&2&&r!==(r=h[33].padding+h[38]*Q+Q/2)&&s(o,"x",r),g[0]&2&&u!==(u=h[33].padding+W/1.5)&&s(o,"y",u)},d(h){h&&(L(e),L(o))}}}function Xe(t){let e,n=H(t[33].bucket.Keys),l=[];for(let o=0;o<n.length;o+=1)l[o]=Ye(ve(t,n,o));return{c(){for(let o=0;o<l.length;o+=1)l[o].c();e=F()},m(o,f){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(o,f);V(o,e,f)},p(o,f){if(f[0]&2){n=H(o[33].bucket.Keys);let i;for(i=0;i<n.length;i+=1){const r=ve(o,n,i);l[i]?l[i].p(r,f):(l[i]=Ye(r),l[i].c(),l[i].m(e.parentNode,e))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length}},d(o){o&&L(e),ue(l,o)}}}function Ye(t){let e,n,l,o,f,i,r=(t[39]??"")+"",u,h,g;return{c(){e=A("rect"),i=A("text"),u=J(r),s(e,"x",n=t[33].padding),s(e,"y",l=t[33].padding+W+t[38]*K),s(e,"width",o=t[33].width-q*2),s(e,"height",K),s(e,"fill",f=t[39]==null?"#dbfdc9":"#b2f2bb"),s(e,"stroke","#12b886"),s(e,"class","cell-key svelte-1u31mpo"),s(i,"x",h=t[33].padding+6),s(i,"y",g=t[33].padding+W+t[38]*K+K/1.5),s(i,"font-size","13")},m(c,_){V(c,e,_),V(c,i,_),M(i,u)},p(c,_){_[0]&2&&n!==(n=c[33].padding)&&s(e,"x",n),_[0]&2&&l!==(l=c[33].padding+W+c[38]*K)&&s(e,"y",l),_[0]&2&&o!==(o=c[33].width-q*2)&&s(e,"width",o),_[0]&2&&f!==(f=c[39]==null?"#dbfdc9":"#b2f2bb")&&s(e,"fill",f),_[0]&2&&r!==(r=(c[39]??"")+"")&&$(u,r),_[0]&2&&h!==(h=c[33].padding+6)&&s(i,"x",h),_[0]&2&&g!==(g=c[33].padding+W+c[38]*K+K/1.5)&&s(i,"y",g)},d(c){c&&(L(e),L(i))}}}function Ne(t){let e,n=H(t[33].bucket.Values),l=[];for(let o=0;o<n.length;o+=1)l[o]=Be(ye(t,n,o));return{c(){for(let o=0;o<l.length;o+=1)l[o].c();e=F()},m(o,f){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(o,f);V(o,e,f)},p(o,f){if(f[0]&2){n=H(o[33].bucket.Values);let i;for(i=0;i<n.length;i+=1){const r=ye(o,n,i);l[i]?l[i].p(r,f):(l[i]=Be(r),l[i].c(),l[i].m(e.parentNode,e))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length}},d(o){o&&L(e),ue(l,o)}}}function Be(t){let e,n,l,o,f,i,r=(t[36]??"")+"",u,h,g;return{c(){e=A("rect"),i=A("text"),u=J(r),s(e,"x",n=t[33].padding),s(e,"y",l=t[33].padding+W+(t[33].bucket.Keys?t[33].bucket.Keys.length:0)*K+t[38]*K),s(e,"width",o=t[33].width-q*2),s(e,"height",K),s(e,"fill",f=t[36]==null?"#fff2b8":"#ffec99"),s(e,"stroke","#ffa94d"),s(e,"class","cell-value svelte-1u31mpo"),s(i,"x",h=t[33].padding+6),s(i,"y",g=t[33].padding+W+(t[33].bucket.Keys?t[33].bucket.Keys.length:0)*K+t[38]*K+K/1.5),s(i,"font-size","13")},m(c,_){V(c,e,_),V(c,i,_),M(i,u)},p(c,_){_[0]&2&&n!==(n=c[33].padding)&&s(e,"x",n),_[0]&2&&l!==(l=c[33].padding+W+(c[33].bucket.Keys?c[33].bucket.Keys.length:0)*K+c[38]*K)&&s(e,"y",l),_[0]&2&&o!==(o=c[33].width-q*2)&&s(e,"width",o),_[0]&2&&f!==(f=c[36]==null?"#fff2b8":"#ffec99")&&s(e,"fill",f),_[0]&2&&r!==(r=(c[36]??"")+"")&&$(u,r),_[0]&2&&h!==(h=c[33].padding+6)&&s(i,"x",h),_[0]&2&&g!==(g=c[33].padding+W+(c[33].bucket.Keys?c[33].bucket.Keys.length:0)*K+c[38]*K+K/1.5)&&s(i,"y",g)},d(c){c&&(L(e),L(i))}}}function Oe(t,e){let n,l,o=e[33].x+e[33].width>e[3].x&&e[33].x<e[3].x+e[3].w&&e[33].y+e[33].height>e[3].y&&e[33].y<e[3].y+e[3].h&&Ke(e);return{key:t,first:null,c(){n=F(),o&&o.c(),l=F(),this.first=n},m(f,i){V(f,n,i),o&&o.m(f,i),V(f,l,i)},p(f,i){e=f,e[33].x+e[33].width>e[3].x&&e[33].x<e[3].x+e[3].w&&e[33].y+e[33].height>e[3].y&&e[33].y<e[3].y+e[3].h?o?o.p(e,i):(o=Ke(e),o.c(),o.m(l.parentNode,l)):o&&(o.d(1),o=null)},d(f){f&&(L(n),L(l)),o&&o.d(f)}}}function Le(t){let e,n,l,o,f;return{c(){e=A("line"),s(e,"x1",n=t[30].x),s(e,"y1",l=t[30].y1),s(e,"x2",o=t[30].x),s(e,"y2",f=t[30].y2),s(e,"stroke","#000"),s(e,"stroke-width","2"),s(e,"marker-end","url(#arrow)")},m(i,r){V(i,e,r)},p(i,r){r[0]&4&&n!==(n=i[30].x)&&s(e,"x1",n),r[0]&4&&l!==(l=i[30].y1)&&s(e,"y1",l),r[0]&4&&o!==(o=i[30].x)&&s(e,"x2",o),r[0]&4&&f!==(f=i[30].y2)&&s(e,"y2",f)},d(i){i&&L(e)}}}function Ve(t){let e,n=t[30].x>t[3].x&&t[30].x<t[3].x+t[3].w&&Le(t);return{c(){n&&n.c(),e=F()},m(l,o){n&&n.m(l,o),V(l,e,o)},p(l,o){l[30].x>l[3].x&&l[30].x<l[3].x+l[3].w?n?n.p(l,o):(n=Le(l),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(l){l&&L(e),n&&n.d(l)}}}function Ce(t){let e,n,l;return{c(){e=D("div"),s(e,"class","splitter svelte-1u31mpo")},m(o,f){V(o,e,f),n||(l=U(e,"mousedown",t[12]),n=!0)},p:x,d(o){o&&L(e),n=!1,l()}}}function ht(t){let e;return{c(){e=D("div"),e.textContent="No hmap data loaded",s(e,"class","row svelte-1u31mpo")},m(n,l){V(n,e,l)},p:x,d(n){n&&L(e)}}}function at(t){let e,n=H(Object.entries(t[0])),l=[];for(let o=0;o<n.length;o+=1)l[o]=Pe(we(t,n,o));return{c(){for(let o=0;o<l.length;o+=1)l[o].c();e=F()},m(o,f){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(o,f);V(o,e,f)},p(o,f){if(f[0]&1){n=H(Object.entries(o[0]));let i;for(i=0;i<n.length;i+=1){const r=we(o,n,i);l[i]?l[i].p(r,f):(l[i]=Pe(r),l[i].c(),l[i].m(e.parentNode,e))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length}},d(o){o&&L(e),ue(l,o)}}}function dt(t){let e=(t[27]??"nil")+"",n;return{c(){n=J(e)},m(l,o){V(l,n,o)},p(l,o){o[0]&1&&e!==(e=(l[27]??"nil")+"")&&$(n,e)},d(l){l&&L(n)}}}function _t(t){let e,n=JSON.stringify(t[27],null,1)+"",l;return{c(){e=D("pre"),l=J(n),s(e,"class","json-block svelte-1u31mpo")},m(o,f){V(o,e,f),M(e,l)},p(o,f){f[0]&1&&n!==(n=JSON.stringify(o[27],null,1)+"")&&$(l,n)},d(o){o&&L(e)}}}function Pe(t){let e,n,l=t[26]+"",o,f,i,r;function u(c,_){return c[27]!==null&&typeof c[27]=="object"?_t:dt}let h=u(t),g=h(t);return{c(){e=D("div"),n=D("span"),o=J(l),f=ne(),i=D("b"),g.c(),r=ne(),s(n,"class","key-label svelte-1u31mpo"),s(i,"class","val-label svelte-1u31mpo"),s(e,"class","row svelte-1u31mpo")},m(c,_){V(c,e,_),M(e,n),M(n,o),M(e,f),M(e,i),g.m(i,null),M(e,r)},p(c,_){_[0]&1&&l!==(l=c[26]+"")&&$(o,l),h===(h=u(c))&&g?g.p(c,_):(g.d(1),g=h(c),g&&(g.c(),g.m(i,null)))},d(c){c&&L(e),g.d()}}}function gt(t){let e,n,l,o=t[5]?"→":"← hmap",f,i,r,u,h,g,c=[],_=new Map,N,S,T,R,k,X,B,m,Y,G,E=H(t[1]);const z=a=>a[33].id;for(let a=0;a<E.length;a+=1){let b=ke(t,E,a),p=z(b);_.set(p,c[a]=Oe(p,b))}let P=H(t[2]),O=[];for(let a=0;a<P.length;a+=1)O[a]=Ve(be(t,P,a));let d=t[5]&&Ce(t);function w(a,b){return b[0]&1&&(m=null),m==null&&(m=!!(a[0]&&Object.keys(a[0]).length>0)),m?at:ht}let y=w(t,[-1,-1]),v=y(t);return{c(){e=D("div"),n=D("div"),l=D("button"),f=J(o),i=ne(),r=A("svg"),u=A("defs"),h=A("marker"),g=A("path");for(let a=0;a<c.length;a+=1)c[a].c();N=F();for(let a=0;a<O.length;a+=1)O[a].c();T=ne(),d&&d.c(),R=ne(),k=D("div"),X=D("h3"),X.textContent="hmap structure",B=ne(),v.c(),s(l,"class","toggle-btn svelte-1u31mpo"),s(g,"d","M0,0 L6,3 L0,6 Z"),s(g,"fill","#000"),s(h,"id","arrow"),s(h,"markerWidth","6"),s(h,"markerHeight","6"),s(h,"refX","3"),s(h,"refY","3"),s(h,"orient","auto"),s(r,"viewBox",S=t[3].x+" "+t[3].y+" "+t[3].w+" "+t[3].h),s(r,"width","100%"),s(r,"height","100%"),s(r,"preserveAspectRatio","xMinYMin meet"),s(r,"class","svelte-1u31mpo"),s(n,"id","svg-container"),s(n,"class","svelte-1u31mpo"),s(k,"class","side svelte-1u31mpo"),fe(k,"width",t[4]+"px"),fe(k,"display",t[5]?"block":"none"),s(e,"class","root svelte-1u31mpo")},m(a,b){V(a,e,b),M(e,n),M(n,l),M(l,f),M(n,i),M(n,r),M(r,u),M(u,h),M(h,g);for(let p=0;p<c.length;p+=1)c[p]&&c[p].m(r,null);M(r,N);for(let p=0;p<O.length;p+=1)O[p]&&O[p].m(r,null);M(e,T),d&&d.m(e,null),M(e,R),M(e,k),M(k,X),M(k,B),v.m(k,null),Y||(G=[U(l,"click",t[13]),U(n,"wheel",t[6],{passive:!1}),U(n,"mousedown",t[7]),U(n,"mousemove",t[9]),U(n,"mouseup",t[8]),U(n,"mouseleave",t[8]),U(n,"touchstart",t[10],{passive:!1}),U(n,"touchmove",t[11],{passive:!1})],Y=!0)},p(a,b){if(b[0]&32&&o!==(o=a[5]?"→":"← hmap")&&$(f,o),b[0]&10&&(E=H(a[1]),c=ot(c,b,z,1,a,E,_,r,lt,Oe,N,ke)),b[0]&12){P=H(a[2]);let p;for(p=0;p<P.length;p+=1){const C=be(a,P,p);O[p]?O[p].p(C,b):(O[p]=Ve(C),O[p].c(),O[p].m(r,null))}for(;p<O.length;p+=1)O[p].d(1);O.length=P.length}b[0]&8&&S!==(S=a[3].x+" "+a[3].y+" "+a[3].w+" "+a[3].h)&&s(r,"viewBox",S),a[5]?d?d.p(a,b):(d=Ce(a),d.c(),d.m(e,R)):d&&(d.d(1),d=null),y===(y=w(a,b))&&v?v.p(a,b):(v.d(1),v=y(a),v&&(v.c(),v.m(k,null))),b[0]&16&&fe(k,"width",a[4]+"px"),b[0]&32&&fe(k,"display",a[5]?"block":"none")},i:x,o:x,d(a){a&&L(e);for(let b=0;b<c.length;b+=1)c[b].d();ue(O,a),d&&d.d(),v.d(),Y=!1,oe(G)}}}const W=24,K=22,Re=80,ce=40,pt=4,We=12,q=12,mt=1.5,Q=27;function wt(t,e,n){let l=[],o=[],f=null,i=[],r=[],u={x:0,y:0,w:1200,h:900},h=280,g=280,c=!0,_=!1,N=!1,S=0,T=0,R=0;async function k(){try{const[d,w]=await Promise.all([fetch("/vizual").catch(()=>null),fetch("/hmap").catch(()=>null)]);if(d&&d.ok){const a=await d.text();l=a?JSON.parse(a):[]}if(w&&w.ok){const a=await w.text();n(0,f=a?JSON.parse(a):{})}o=[];let y=[];if(Array.isArray(l)){for(const a of l)a.type==="main"?(y.length&&o.push(y),y=[a]):y.push(a);y.length&&o.push(y)}X();const v=document.getElementById("svg-container");if(v){const a=v.getBoundingClientRect(),b=a.height/a.width;n(3,u.w=1200,u),n(3,u.h=1200*b,u),n(3,u)}}catch(d){console.error("Ошибка загрузки:",d)}}function X(){if(n(1,i=[]),n(2,r=[]),!o.length)return;let d=Re;for(const w of o){let y=ce;const v=Math.max(...w.map(p=>p.tophash?p.tophash.length:0))*Q,a=w.map(p=>{const C=p.Keys||[],j=p.Values||[];return Math.max(...C.map(I=>I?I.toString().length:0),...j.map(I=>I?I.toString().length:0),p.overflow?p.overflow.toString().length:0,0)*8+q*2}),b=Math.max(...a,v,260);for(let p=0;p<w.length;p++){const C=w[p],j=C.Keys?C.Keys.length:0,Z=C.Values?C.Values.length:0,I=W+j*K+Z*K+K+q*2;i.push({id:C.id||Math.random(),x:d,y,width:b,height:I,bucket:C,padding:q}),p<w.length-1&&r.push({x:d+b/2,y1:y+I,y2:y+I+ce-pt}),y+=I+ce}d+=b+Re}}function B(d){d.preventDefault();const w=d.currentTarget.getBoundingClientRect();if(d.ctrlKey||d.metaKey){const y=d.clientX-w.left,v=d.clientY-w.top,a=u.x+y*u.w/w.width,b=u.y+v*u.h/w.height,p=Math.pow(1.001,d.deltaY*5),C=u.w*p,j=u.h*p;if(C<100||C>4e4)return;n(3,u.x=a-y/w.width*C,u),n(3,u.y=b-v/w.height*j,u),n(3,u.w=C,u),n(3,u.h=j,u)}else n(3,u.x+=d.deltaX*u.w/w.width,u),n(3,u.y+=d.deltaY*u.h/w.height,u);n(3,u)}function m(d){d.button===0&&(N=!0)}function Y(){N=!1}function G(d){if(N){const w=document.getElementById("svg-container").getBoundingClientRect();n(3,u.x-=d.movementX*u.w/w.width,u),n(3,u.y-=d.movementY*u.h/w.height,u),n(3,u)}}function E(d){d.touches.length===1?(S=d.touches[0].clientX,T=d.touches[0].clientY):d.touches.length===2&&(R=Math.hypot(d.touches[0].clientX-d.touches[1].clientX,d.touches[0].clientY-d.touches[1].clientY))}function z(d){const w=d.currentTarget.getBoundingClientRect();if(d.touches.length===1){const y=d.touches[0].clientX,v=d.touches[0].clientY;n(3,u.x-=(y-S)*u.w/w.width,u),n(3,u.y-=(v-T)*u.h/w.height,u),S=y,T=v}else if(d.touches.length===2){const y=Math.hypot(d.touches[0].clientX-d.touches[1].clientX,d.touches[0].clientY-d.touches[1].clientY),v=R/y,a=(d.touches[0].clientX+d.touches[1].clientX)/2-w.left,b=(d.touches[0].clientY+d.touches[1].clientY)/2-w.top,p=u.x+a*u.w/w.width,C=u.y+b*u.h/w.height,j=u.w*v,Z=u.h*v;j>100&&j<4e4&&(n(3,u.x=p-a/w.width*j,u),n(3,u.y=C-b/w.height*Z,u),n(3,u.w=j,u),n(3,u.h=Z,u)),R=y}n(3,u)}function P(d){_=!0;const w=d.clientX,y=h,a=document.getElementById("svg-container").getBoundingClientRect(),b=u.w/a.width,p=a.height,C=a.width,j=I=>{if(!_)return;const Ie=w-I.clientX,re=Math.max(100,Math.min(800,y+Ie)),He=re-h;n(4,h=re),n(3,u.w-=He*b,u);const De=C-(re-y);n(3,u.h=u.w*(p/De),u),n(3,u)},Z=()=>{_=!1,window.removeEventListener("mousemove",j),window.removeEventListener("mouseup",Z)};window.addEventListener("mousemove",j),window.addEventListener("mouseup",Z)}function O(){const d=document.getElementById("svg-container"),w=d.getBoundingClientRect(),y=u.w/w.width;c?(g=h,n(3,u.w+=h*y,u),n(4,h=0),n(5,c=!1)):(n(4,h=g),n(3,u.w-=h*y,u),n(5,c=!0)),setTimeout(()=>{const v=d.getBoundingClientRect();v.width>0&&(n(3,u.h=u.w*(v.height/v.width),u),n(3,u))},0)}return Qe(k),[f,i,r,u,h,c,B,m,Y,G,E,z,P,O]}class bt extends ct{constructor(e){super(),ft(this,e,wt,gt,Ue,{},null,[-1,-1])}}new bt({target:document.getElementById("app")});
